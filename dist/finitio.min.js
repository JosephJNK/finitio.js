!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={name:"finitio",version:"1.0.0",description:"Finitio is a language for capturing information structure.",main:"index.js",author:"Louis Lambeau <louislambeau@gmail.com>",license:"MIT",repository:{type:"git",url:"https://github.com/llambeau/finitio.js"},keywords:["finitio","typing","system","json","serialization","validation"],analyze:!0,bin:{"finitio-js":"./bin/finitio-js"},scripts:{test:"grunt",build:"grunt compile",prepublish:"grunt test && grunt compile"},dependencies:{commander:"~2.9.0"},devDependencies:{"coffee-script":"~1.10.0",cucumber:"~0.9.4",underscore:"~1.8.3",shelljs:"~0.5.3",should:"~8.2.1",browserify:"~13.0.0",coffeeify:"~2.0.1",pegjs:"~0.9.0",grunt:"~0.4.5","grunt-cli":"~0.1.13","grunt-contrib-watch":"~0.6.1","grunt-browserify":"~4.0.1","grunt-coffeelint":"0.0.13","grunt-cucumber":"git://github.com/llambeau/grunt-cucumber-js.git#master","grunt-mocha-test":"~0.12.7","grunt-contrib-coffee":"~0.13.0","grunt-contrib-copy":"~0.8.2","grunt-contrib-clean":"~0.7.0","grunt-contrib-uglify":"~0.11.0","grunt-peg":"~2.0.0","grunt-contrib-jshint":"~0.12.0","grunt-fixtures2js":"~0.1.3","grunt-shell":"~1.1.2"}}},{}],2:[function(a,b,c){(function(){var c,d,e;c=a("./finitio/support/utils"),d=function(){function b(){}return b.VERSION=a("../package.json").version,b.CONFORMANCE="0.4",b.World={Finitio:b,JsTypes:{Finitio:b,Number:Number,String:String,Boolean:Boolean,Date:Date,Function:Function,RegExp:RegExp},importResolver:a("./finitio/resolver")},b.world=function(){var a,d,f,g;for(g=c.clone(b.World),d=0,f=arguments.length;f>d;d++)a=arguments[d],a&&e(g,a);return g},b.parse=function(a,b){return this.Parser.parse(a,b||{})},b.system=function(a,b){return"string"==typeof a&&(a=this.parse(a)),this.Meta.System.dress(a,this.world(b))},b.bundleFile=function(a,b){return new this.Bundler(this.world(b)).addFile(a).flush()},b.bundleSource=function(a,b){return new this.Bundler(this.world(b)).addSource(a).flush()},b}(),e=function(a,b){var d,e,f;e=[];for(d in b)f=b[d],"JsTypes"===d?e.push(a[d]=c.extend(a[d],f)):e.push(a[d]=f);return e},d.TypeError=a("./finitio/errors").TypeError,d.Utils=a("./finitio/support/utils"),d.Contracts=a("./finitio/contracts"),d.Attribute=a("./finitio/support/attribute"),d.Contract=a("./finitio/support/contract"),d.Heading=a("./finitio/support/heading"),d.Constraint=a("./finitio/support/constraint"),d.System=a("./finitio/system"),d.Parser=a("./finitio/parser"),d.Bundler=a("./finitio/bundler"),d.Type=a("./finitio/type"),d.TypeDef=a("./finitio/type/type_def"),d.TypeRef=a("./finitio/type/type_ref"),d.AdType=a("./finitio/type/ad_type"),d.AnyType=a("./finitio/type/any_type"),d.BuiltinType=a("./finitio/type/builtin_type"),d.RelationType=a("./finitio/type/relation_type"),d.SeqType=a("./finitio/type/seq_type"),d.SetType=a("./finitio/type/set_type"),d.StructType=a("./finitio/type/struct_type"),d.SubType=a("./finitio/type/sub_type"),d.TupleType=a("./finitio/type/tuple_type"),d.UnionType=a("./finitio/type/union_type"),d.Meta=a("./finitio/support/meta"),b.exports=d}).call(this)},{"../package.json":1,"./finitio/bundler":3,"./finitio/contracts":4,"./finitio/errors":9,"./finitio/parser":10,"./finitio/resolver":11,"./finitio/support/attribute":13,"./finitio/support/constraint":15,"./finitio/support/contract":16,"./finitio/support/heading":19,"./finitio/support/meta":22,"./finitio/support/utils":23,"./finitio/system":24,"./finitio/type":25,"./finitio/type/ad_type":26,"./finitio/type/any_type":27,"./finitio/type/builtin_type":28,"./finitio/type/relation_type":29,"./finitio/type/seq_type":30,"./finitio/type/set_type":31,"./finitio/type/struct_type":32,"./finitio/type/sub_type":33,"./finitio/type/tuple_type":34,"./finitio/type/type_def":35,"./finitio/type/type_ref":36,"./finitio/type/union_type":37}],3:[function(a,b,c){(function(){var c,d,e,f,g;f=a("./parser"),e=a("./support/meta"),c=a("./support/utils"),g=a("fs"),d=function(){function a(a){this.world=a,this.systems={}}var b;return b="module.exports = (function(){\n  var ss = JSONDATA;\n  var r = function(fallback){\n    return function(path, w, options){\n      var s = ss[path];\n      if (s){\n        if (options && options.raw){\n          return [ path, s ];\n        } else {\n          return w.Finitio.system(s, w);\n        }\n      } else if (fallback) {\n        return fallback(path, w, options);\n      } else {\n        throw new Error('Unable to resolve: `' + path + '`');\n      }\n    };\n  };\n  return function(w, options){\n    if (!w) { w = require('finit' + 'io.js').World; }\n    w = w.Finitio.world(w, {\n      importResolver: r(w.importResolver)\n    });\n    return w.importResolver('URL', w, options);\n  };\n})();",a.prototype.flush=function(){return b.replace(/^[ ]{4}/,"").replace(/JSONDATA/,JSON.stringify(this.systems)).replace(/URL/,this.world.sourceUrl)},a.prototype.addDirectory=function(a){throw new Error("Bundling directories is not supported")},a.prototype.addFile=function(a){var b;return g.lstatSync(a).isDirectory()?this.addDirectory(a):(b=g.readFileSync(a).toString(),this.addSource(b)),this},a.prototype.addSource=function(a){return this._bundle(this.world.Finitio.parse(a),this.world),this},a.prototype._bundle=function(a,b){var c,d,e,f,g,h,i;if(b.check&&b.Finitio.system(a,b),this.systems[b.sourceUrl]=a,a.imports){for(h=a.imports,i=[],c=0,e=h.length;e>c;c++)d=h[c],g=b.importResolver(d.from,b,{raw:!0}),d.from=g[0],f=b.Finitio.world(b,{sourceUrl:g[0]}),i.push(this._bundle(g[1],f));return i}},a}(),b.exports=d}).call(this)},{"./parser":10,"./support/meta":22,"./support/utils":23,fs:38}],4:[function(a,b,c){(function(){b.exports={Date:a("./contracts/date"),Time:a("./contracts/time"),Expression:a("./contracts/expression"),JsType:a("./contracts/js_type")}}).call(this)},{"./contracts/date":5,"./contracts/expression":6,"./contracts/js_type":7,"./contracts/time":8}],5:[function(a,b,c){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b)){var c=b.getFullYear().toString(),d=(b.getMonth()+1).toString(),e=b.getDate().toString();return c+"-"+(d[1]?d:"0"+d[0])+"-"+(e[1]?e:"0"+e[0])}throw new Error("Invalid Date `"+b+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],6:[function(a,b,c){b.exports=function(){return{defn:{dress:function(a){/^return/.test(a[a.length-1])||(a[a.length-1]="return "+a[a.length-1]);var b=Function.apply(Function,a);return b.defn=a,b},undress:function(a){if(!a.defn)throw new Error("No defn found: "+a.toString());return a.defn}}}}()},{}],7:[function(a,b,c){b.exports=function(){return{name:{dress:function(a,b){var c=null;if(c=b?new Function("world","return world."+a+";")(b):new Function("return "+a+";")())return c;throw msg="Unknown javascript type: `"+a+"` (",msg+=Object.keys(b).toString(),msg+=")",new Error(msg)},undress:function(a){throw new Error("Unimplemented")}}}}()},{}],8:[function(a,b,c){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b))return b.toISOString();throw new Error("Invalid Date `"+s+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],9:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;c=a("./support/utils"),d=function(a){function b(a){c.extend(this,a),this.message=g(this),b.__super__.constructor.call(this,this.message,this.rootCause)}return i(b,a),Object.defineProperty(b.prototype,"locatedMessage",{get:function(){return null!=this.location?"["+this.location+"] "+this.message:this.message}}),Object.defineProperty(b.prototype,"causes",{get:function(){return null!=this.causesCache?this.causesCache:this.causesCache=this.children&&f(this)}}),Object.defineProperty(b.prototype,"cause",{get:function(){return this.causes&&this.causes[0]}}),Object.defineProperty(b.prototype,"rootCauses",{get:function(){return null!=this.rootCausesCache?this.rootCausesCache:this.rootCausesCache=h(this,[])}}),Object.defineProperty(b.prototype,"rootCause",{get:function(){return this.rootCauses[this.rootCauses.length-1]}}),b.prototype.explain=function(){var a,b,c,d,e;if(e=this.locatedMessage+"\n",this.rootCauses)for(d=this.rootCauses,b=0,c=d.length;c>b;b++)a=d[b],e+="  "+a.locatedMessage+"\n";return e},b.prototype.explainTree=function(a){var b,c,d,e,f,g,h,i;for(i="",null==a&&(a=0),c=d=0,g=a;g>=0?g>d:d>g;c=g>=0?++d:--d)i+="  ";if(i+=this.locatedMessage+"\n",null!=this.causes)for(h=this.causes,e=0,f=h.length;f>e;e++)b=h[e],i+=b.explainTree(a+1);return i},b}(Error),g=function(a){var b,d,e,f;return e=a.error,e instanceof Array?(f=e,e=f[0],b=f[1],d=-1,e.replace(/\$\{([a-zA-Z]+)\}/g,function(e){return function(e){var f;return d+=1,f=e.slice(2,e.length-1),c.toString(a[f]||b[d])}}(this))):"string"==typeof e?e:a.toString()},f=function(a){return c.map(a.children,function(b){return b.location=e(a.location,b.location),b instanceof d?b:new d(b instanceof Error?{error:b.message,location:b.location}:b)})},h=function(a,b){return a.causes?c.each(a.causes,function(a){return h(a,b)}):b.push(a),b},e=function(a,b){return null==b?a:null==a?b:a+"/"+b},b.exports={TypeError:d}}).call(this)},{"./support/utils":23}],10:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(b){var c,d,e=Nc[b];if(e)return e;for(c=b-1;!Nc[c];)c--;for(e=Nc[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return Nc[b]=e,e}function d(a,b){var d=c(a),e=c(b);return{start:{offset:a,line:d.line,column:d.column},end:{offset:b,line:e.line,column:e.column}}}function e(a){Oc>Lc||(Lc>Oc&&(Oc=Lc,Pc=[]),Pc.push(a))}function f(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function g(){var a,b,c,d,e,f,g,i,k,l,n,o=59*Lc+0,p=Rc[o];return p?(Lc=p.nextPos,p.result):(a=Lc,b=ha(),b!==pa?(c=h(),c!==pa?(d=ha(),d!==pa?(e=j(),e!==pa?(f=ha(),f!==pa?(g=O(),g===pa&&(g=null),g!==pa?(i=ha(),i!==pa?(k=m(),k===pa&&(k=null),k!==pa?(l=ha(),l!==pa?(n=ka(),n!==pa?(Mc=a,b=sa(c,e,g,k),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa),Rc[o]={nextPos:Lc,result:a},a)}function h(){var a,b,c,d,e,f,g=59*Lc+1,h=Rc[g];if(h)return Lc=h.nextPos,h.result;if(a=Lc,b=i(),b===pa&&(b=null),b!==pa){for(c=[],d=Lc,e=ha(),e!==pa?(f=i(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);d!==pa;)c.push(d),d=Lc,e=ha(),e!==pa?(f=i(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);c!==pa?(Mc=a,b=ta(b,c),a=b):(Lc=a,a=pa)}else Lc=a,a=pa;return Rc[g]={nextPos:Lc,result:a},a}function i(){var b,c,d,f,g,h,i,j,k=59*Lc+2,l=Rc[k];return l?(Lc=l.nextPos,l.result):(b=Lc,a.substr(Lc,7)===ua?(c=ua,Lc+=7):(c=pa,0===Qc&&e(va)),c!==pa?(d=ja(),d!==pa?(f=ca(),f!==pa?(g=ja(),g!==pa?(a.substr(Lc,2)===wa?(h=wa,Lc+=2):(h=pa,0===Qc&&e(xa)),h!==pa?(i=ja(),i!==pa?(j=_(),j!==pa?(Mc=b,c=ya(f,j),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),b===pa&&(b=Lc,a.substr(Lc,7)===ua?(c=ua,Lc+=7):(c=pa,0===Qc&&e(va)),c!==pa?(d=ja(),d!==pa?(f=ca(),f!==pa?(Mc=b,c=za(f),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)),Rc[k]={nextPos:Lc,result:b},b)}function j(){var a,b,c,d,e,f,g=59*Lc+3,h=Rc[g];if(h)return Lc=h.nextPos,h.result;if(a=Lc,b=k(),b===pa&&(b=null),b!==pa){for(c=[],d=Lc,e=ha(),e!==pa?(f=k(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);d!==pa;)c.push(d),d=Lc,e=ha(),e!==pa?(f=k(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);c!==pa?(Mc=a,b=ta(b,c),a=b):(Lc=a,a=pa)}else Lc=a,a=pa;return Rc[g]={nextPos:Lc,result:a},a}function k(){var b,c,d,f,g,h,i,j=59*Lc+4,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(d=$(),d!==pa?(f=ha(),f!==pa?(61===a.charCodeAt(Lc)?(g=Aa,Lc++):(g=pa,0===Qc&&e(Ba)),g!==pa?(h=ha(),h!==pa?(i=m(),i!==pa?(Mc=b,c=Ca(c,d,i),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function l(){var a,b=59*Lc+5,c=Rc[b];return c?(Lc=c.nextPos,c.result):(a=m(),Rc[b]={nextPos:Lc,result:a},a)}function m(){var a,b,c,d,e,f,g,h=59*Lc+6,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(a=Lc,b=O(),b===pa&&(b=null),b!==pa)if(c=n(),c!==pa){if(d=[],e=Lc,f=ea(),f!==pa?(g=n(),g!==pa?(f=[f,g],e=f):(Lc=e,e=pa)):(Lc=e,e=pa),e!==pa)for(;e!==pa;)d.push(e),e=Lc,f=ea(),f!==pa?(g=n(),g!==pa?(f=[f,g],e=f):(Lc=e,e=pa)):(Lc=e,e=pa);else d=pa;d!==pa?(Mc=a,b=Da(b,c,d),a=b):(Lc=a,a=pa)}else Lc=a,a=pa;else Lc=a,a=pa;return a===pa&&(a=n()),Rc[h]={nextPos:Lc,result:a},a}function n(){var a,b,c,d,e=59*Lc+7,f=Rc[e];return f?(Lc=f.nextPos,f.result):(a=Lc,b=O(),b===pa&&(b=null),b!==pa?(c=s(),c!==pa?(d=o(),d!==pa?(Mc=a,b=Ea(b,c,d),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa),a===pa&&(a=s()),Rc[e]={nextPos:Lc,result:a},a)}function o(){var b,c,d,f,g,h,i,j,k=59*Lc+8,l=Rc[k];return l?(Lc=l.nextPos,l.result):(b=Lc,40===a.charCodeAt(Lc)?(c=Fa,Lc++):(c=pa,0===Qc&&e(Ga)),c!==pa?(d=ha(),d!==pa?(f=W(),f!==pa?(g=ea(),g!==pa?(h=p(),h!==pa?(i=ha(),i!==pa?(41===a.charCodeAt(Lc)?(j=Ha,Lc++):(j=pa,0===Qc&&e(Ia)),j!==pa?(Mc=b,c=Ja(f,h),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[k]={nextPos:Lc,result:b},b)}function p(){var a,b,c,d,e,f,g=59*Lc+9,h=Rc[g];if(h)return Lc=h.nextPos,h.result;if(a=Lc,b=q(),b!==pa){for(c=[],d=Lc,e=ga(),e!==pa?(f=q(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);d!==pa;)c.push(d),d=Lc,e=ga(),e!==pa?(f=q(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);c!==pa?(d=ga(),d!==pa?(Mc=a,b=ta(b,c),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)}else Lc=a,a=pa;return a===pa&&(a=Lc,b=r(),b!==pa&&(Mc=a,b=Ka(b)),a=b),Rc[g]={nextPos:Lc,result:a},a}function q(){var b,c,d,f,g,h,i=59*Lc+10,j=Rc[i];return j?(Lc=j.nextPos,j.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(d=Y(),d!==pa?(58===a.charCodeAt(Lc)?(f=La,Lc++):(f=pa,0===Qc&&e(Ma)),f!==pa?(g=ha(),g!==pa?(h=L(),h!==pa?(Mc=b,c=Na(c,d,h),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[i]={nextPos:Lc,result:b},b)}function r(){var a,b,c=59*Lc+11,d=Rc[c];return d?(Lc=d.nextPos,d.result):(a=Lc,b=L(),b!==pa&&(Mc=a,b=Oa(b)),a=b,Rc[c]={nextPos:Lc,result:a},a)}function s(){var a,b=59*Lc+12,c=Rc[b];return c?(Lc=c.nextPos,c.result):(a=u(),a===pa&&(a=t(),a===pa&&(a=x())),Rc[b]={nextPos:Lc,result:a},a)}function t(){var b,c,d,f,g,h,i,j=59*Lc+13,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(123===a.charCodeAt(Lc)?(d=Pa,Lc++):(d=pa,0===Qc&&e(Qa)),d!==pa?(f=ha(),f!==pa?(g=v(),g!==pa?(h=ha(),h!==pa?(125===a.charCodeAt(Lc)?(i=Ra,Lc++):(i=pa,0===Qc&&e(Sa)),i!==pa?(Mc=b,c=Ta(c,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function u(){var b,c,d,f,g,h,i,j=59*Lc+14,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(a.substr(Lc,2)===Ua?(d=Ua,Lc+=2):(d=pa,0===Qc&&e(Va)),d!==pa?(f=ha(),f!==pa?(g=v(),g!==pa?(h=ha(),h!==pa?(a.substr(Lc,2)===Wa?(i=Wa,Lc+=2):(i=pa,0===Qc&&e(Xa)),i!==pa?(Mc=b,c=Ya(c,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function v(){var a,b,c,d,e,f,g=59*Lc+15,h=Rc[g];if(h)return Lc=h.nextPos,h.result;if(a=Lc,b=w(),b===pa&&(b=null),b!==pa){for(c=[],d=Lc,e=ga(),e!==pa?(f=w(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);d!==pa;)c.push(d),d=Lc,e=ga(),e!==pa?(f=w(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);c!==pa?(d=ga(),d!==pa?(e=da(),e===pa&&(e=null),e!==pa?(Mc=a,b=Za(b,c,e),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa)}else Lc=a,a=pa;return Rc[g]={nextPos:Lc,result:a},a}function w(){var b,c,d,f,g,h,i,j,k=59*Lc+16,l=Rc[k];return l?(Lc=l.nextPos,l.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(d=Z(),d!==pa?(f=ha(),f!==pa?(58===a.charCodeAt(Lc)?(g=La,Lc++):(g=pa,0===Qc&&e(Ma)),g!==pa?(63===a.charCodeAt(Lc)?(h=$a,Lc++):(h=pa,0===Qc&&e(_a)),h===pa&&(h=null),h!==pa?(i=ha(),i!==pa?(j=m(),j!==pa?(Mc=b,c=ab(c,d,h,j),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[k]={nextPos:Lc,result:b},b)}function x(){var a,b=59*Lc+17,c=Rc[b];return c?(Lc=c.nextPos,c.result):(a=y(),a===pa&&(a=z(),a===pa&&(a=A(),a===pa&&(a=B()))),Rc[b]={nextPos:Lc,result:a},a)}function y(){var b,c,d,f,g,h,i,j=59*Lc+18,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(123===a.charCodeAt(Lc)?(d=Pa,Lc++):(d=pa,0===Qc&&e(Qa)),d!==pa?(f=ha(),f!==pa?(g=m(),g!==pa?(h=ha(),h!==pa?(125===a.charCodeAt(Lc)?(i=Ra,Lc++):(i=pa,0===Qc&&e(Sa)),i!==pa?(Mc=b,c=bb(c,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function z(){var b,c,d,f,g,h,i,j=59*Lc+19,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(91===a.charCodeAt(Lc)?(d=cb,Lc++):(d=pa,0===Qc&&e(db)),d!==pa?(f=ha(),f!==pa?(g=m(),g!==pa?(h=ha(),h!==pa?(93===a.charCodeAt(Lc)?(i=eb,Lc++):(i=pa,0===Qc&&e(fb)),i!==pa?(Mc=b,c=gb(c,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function A(){var b,c,d,f,g,h,i,j,k=59*Lc+20,l=Rc[k];if(l)return Lc=l.nextPos,l.result;if(b=Lc,c=O(),c===pa&&(c=null),c!==pa)if(60===a.charCodeAt(Lc)?(d=hb,Lc++):(d=pa,0===Qc&&e(ib)),d!==pa)if(f=m(),f!==pa){for(g=[],h=Lc,i=ga(),i!==pa?(j=m(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);h!==pa;)g.push(h),h=Lc,i=ga(),i!==pa?(j=m(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);g!==pa?(h=ga(),h!==pa?(62===a.charCodeAt(Lc)?(i=jb,Lc++):(i=pa,0===Qc&&e(kb)),i!==pa?(Mc=b,c=lb(c,f,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)}else Lc=b,b=pa;else Lc=b,b=pa;else Lc=b,b=pa;return Rc[k]={nextPos:Lc,result:b},b}function B(){var a,b=59*Lc+21,c=Rc[b];return c?(Lc=c.nextPos,c.result):(a=C(),a===pa&&(a=I(),a===pa&&(a=H(),a===pa&&(a=J()))),Rc[b]={nextPos:Lc,result:a},a)}function C(){var a,b,c,d,e=59*Lc+22,f=Rc[e];return f?(Lc=f.nextPos,f.result):(a=Lc,b=D(),b===pa&&(b=null),b!==pa?(c=ha(),c!==pa?(d=E(),d!==pa?(Mc=a,b=mb(b,d),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)):(Lc=a,a=pa),Rc[e]={nextPos:Lc,result:a},a)}function D(){var b,c,d,f,g,h=59*Lc+23,i=Rc[h];return i?(Lc=i.nextPos,i.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(d=Lc,46===a.charCodeAt(Lc)?(f=nb,Lc++):(f=pa,0===Qc&&e(ob)),f!==pa?(g=ba(),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa),d!==pa?(Mc=b,c=pb(c,d),b=c):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[h]={nextPos:Lc,result:b},b)}function E(){var a,b,c,d,e,f,g=59*Lc+24,h=Rc[g];if(h)return Lc=h.nextPos,h.result;if(a=Lc,b=F(),b!==pa){for(c=[],d=Lc,e=ga(),e!==pa?(f=F(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);d!==pa;)c.push(d),d=Lc,e=ga(),e!==pa?(f=F(),f!==pa?(e=[e,f],d=e):(Lc=d,d=pa)):(Lc=d,d=pa);c!==pa?(d=ga(),d!==pa?(Mc=a,b=ta(b,c),a=b):(Lc=a,a=pa)):(Lc=a,a=pa)}else Lc=a,a=pa;return Rc[g]={nextPos:Lc,result:a},a}function F(){var b,c,d,f,g,h,i,j,k=59*Lc+25,l=Rc[k];return l?(Lc=l.nextPos,l.result):(b=Lc,c=G(),c!==pa?(d=ha(),d!==pa?(92===a.charCodeAt(Lc)?(f=qb,Lc++):(f=pa,0===Qc&&e(rb)),f!==pa?(g=K(),g!==pa?(h=ha(),h!==pa?(92===a.charCodeAt(Lc)?(i=qb,Lc++):(i=pa,0===Qc&&e(rb)),i!==pa?(j=K(),j!==pa?(Mc=b,c=sb(c,g,j),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),b===pa&&(b=Lc,c=G(),c!==pa?(d=ha(),d!==pa?(46===a.charCodeAt(Lc)?(f=nb,Lc++):(f=pa,0===Qc&&e(ob)),f!==pa?(g=ba(),g!==pa?(Mc=b,c=tb(c,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),b===pa&&(b=G())),Rc[k]={nextPos:Lc,result:b},b)}function G(){var b,c,d,f,g,h,i,j=59*Lc+26,k=Rc[j];return k?(Lc=k.nextPos,k.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(60===a.charCodeAt(Lc)?(d=hb,Lc++):(d=pa,0===Qc&&e(ib)),d!==pa?(f=X(),f!==pa?(62===a.charCodeAt(Lc)?(g=jb,Lc++):(g=pa,0===Qc&&e(kb)),g!==pa?(h=ha(),h!==pa?(i=m(),i!==pa?(Mc=b,c=ub(c,f,i),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[j]={nextPos:Lc,result:b},b)}function H(){var b,c,d,f=59*Lc+27,g=Rc[f];return g?(Lc=g.nextPos,g.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(46===a.charCodeAt(Lc)?(d=nb,Lc++):(d=pa,0===Qc&&e(ob)),d!==pa?(Mc=b,c=vb(c),b=c):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[f]={nextPos:Lc,result:b},b)}function I(){var b,c,d,f,g=59*Lc+28,h=Rc[g];return h?(Lc=h.nextPos,h.result):(b=Lc,c=O(),c===pa&&(c=null),c!==pa?(46===a.charCodeAt(Lc)?(d=nb,Lc++):(d=pa,0===Qc&&e(ob)),d!==pa?(f=ba(),f!==pa?(Mc=b,c=wb(c,f),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[g]={nextPos:Lc,result:b},b)}function J(){var a,b,c=59*Lc+29,d=Rc[c];return d?(Lc=d.nextPos,d.result):(a=Lc,b=aa(),b!==pa&&(Mc=a,b=xb(b)),a=b,Rc[c]={nextPos:Lc,result:a},a)}function K(){var b,c,d,f,g,h,i,j,k,l,m=59*Lc+30,n=Rc[m];return n?(Lc=n.nextPos,n.result):(b=Lc,40===a.charCodeAt(Lc)?(c=Fa,Lc++):(c=pa,0===Qc&&e(Ga)),c!==pa?(d=ha(),d!==pa?(f=W(),f!==pa?(g=ha(),g!==pa?(124===a.charCodeAt(Lc)?(h=yb,Lc++):(h=pa,0===Qc&&e(zb)),h!==pa?(i=ha(),i!==pa?(j=L(),j!==pa?(k=ha(),k!==pa?(41===a.charCodeAt(Lc)?(l=Ha,Lc++):(l=pa,0===Qc&&e(Ia)),l!==pa?(Mc=b,c=Ab(f,j),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[m]={nextPos:Lc,result:b},b)}function L(){var b,c,d,e=59*Lc+31,f=Rc[e];if(f)return Lc=f.nextPos,f.result;if(b=Lc,c=[],d=M(),d===pa&&(d=N()),d!==pa)for(;d!==pa;)c.push(d),d=M(),d===pa&&(d=N());else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[e]={nextPos:Lc,result:b},b}function M(){var b,c,d,f,g,h=59*Lc+32,i=Rc[h];return i?(Lc=i.nextPos,i.result):(b=Lc,a.substr(Lc,2)===Bb?(c=Bb,Lc+=2):(c=pa,0===Qc&&e(Cb)),c===pa&&(c=Lc,40===a.charCodeAt(Lc)?(d=Fa,Lc++):(d=pa,0===Qc&&e(Ga)),d!==pa?(f=L(),f!==pa?(41===a.charCodeAt(Lc)?(g=Ha,Lc++):(g=pa,0===Qc&&e(Ia)),g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)):(Lc=c,c=pa)):(Lc=c,c=pa)),b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b)}function N(){var b,c,d,f,g,h=59*Lc+33,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=[],d=Lc,f=Lc,Qc++,Db.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Eb)),Qc--,g===pa?f=void 0:(Lc=f,f=pa),f!==pa?(a.length>Lc?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Fb)),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa),d!==pa)for(;d!==pa;)c.push(d),d=Lc,f=Lc,Qc++,Db.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Eb)),Qc--,g===pa?f=void 0:(Lc=f,f=pa),f!==pa?(a.length>Lc?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Fb)),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa);else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function O(){var b,c,d,f,g,h,i,j,k=59*Lc+34,l=Rc[k];if(l)return Lc=l.nextPos,l.result;if(b=Lc,a.substr(Lc,2)===Gb?(c=Gb,Lc+=2):(c=pa,0===Qc&&e(Hb)),c!==pa)if(d=ha(),d!==pa)if(f=P(),f!==pa){for(g=[],h=Lc,i=ga(),i!==pa?(j=P(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);h!==pa;)g.push(h),h=Lc,i=ga(),i!==pa?(j=P(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);g!==pa?(h=ha(),h!==pa?(a.substr(Lc,2)===Ib?(i=Ib,Lc+=2):(i=pa,0===Qc&&e(Jb)),i!==pa?(j=ha(),j!==pa?(Mc=b,c=Kb(f,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)}else Lc=b,b=pa;else Lc=b,b=pa;else Lc=b,b=pa;if(b===pa)if(b=Lc,a.substr(Lc,2)===Gb?(c=Gb,Lc+=2):(c=pa,0===Qc&&e(Hb)),c!==pa){if(d=Lc,f=[],g=Lc,h=Lc,Qc++,a.substr(Lc,2)===Ib?(i=Ib,Lc+=2):(i=pa,0===Qc&&e(Jb)),Qc--,i===pa?h=void 0:(Lc=h,h=pa),h!==pa?(a.length>Lc?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Fb)),i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)):(Lc=g,g=pa),g!==pa)for(;g!==pa;)f.push(g),g=Lc,h=Lc,Qc++,a.substr(Lc,2)===Ib?(i=Ib,Lc+=2):(i=pa,0===Qc&&e(Jb)),Qc--,i===pa?h=void 0:(Lc=h,h=pa),h!==pa?(a.length>Lc?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Fb)),i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)):(Lc=g,g=pa);else f=pa;d=f!==pa?a.substring(d,Lc):f,d!==pa?(a.substr(Lc,2)===Ib?(f=Ib,Lc+=2):(f=pa,0===Qc&&e(Jb)),f!==pa?(g=ha(),g!==pa?(Mc=b,c=Lb(d),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)}else Lc=b,b=pa;return Rc[k]={nextPos:Lc,result:b},b}function P(){var b,c,d,f,g,h,i=59*Lc+35,j=Rc[i];return j?(Lc=j.nextPos,j.result):(b=Lc,c=Z(),c!==pa?(d=ja(),d===pa&&(d=null),d!==pa?(58===a.charCodeAt(Lc)?(f=La,Lc++):(f=pa,0===Qc&&e(Ma)),f!==pa?(g=ja(),g===pa&&(g=null),g!==pa?(h=Q(),h!==pa?(Mc=b,c=Mb(c,h),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa),Rc[i]={nextPos:Lc,result:b},b)}function Q(){var a,b=59*Lc+36,c=Rc[b];return c?(Lc=c.nextPos,c.result):(a=R(),a===pa&&(a=T(),a===pa&&(a=S(),a===pa&&(a=U(),a===pa&&(a=V())))),Rc[b]={nextPos:Lc,result:a},a)}function R(){var b,c,d,f,g,h,i,j,k=59*Lc+37,l=Rc[k];if(l)return Lc=l.nextPos,l.result;if(b=Lc,c=Lc,d=Lc,Nb.test(a.charAt(Lc))?(f=a.charAt(Lc),Lc++):(f=pa,0===Qc&&e(Ob)),f!==pa){for(g=[],h=Lc,Pb.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Qb)),i!==pa?(Nb.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Ob)),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa),h===pa&&(h=Lc,i=Lc,Qc++,Nb.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Ob)),Qc--,j===pa?i=void 0:(Lc=i,i=pa),i!==pa?(a.length>Lc?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Fb)),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa));h!==pa;)g.push(h),h=Lc,Pb.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Qb)),i!==pa?(Nb.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Ob)),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa),h===pa&&(h=Lc,i=Lc,Qc++,Nb.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Ob)),Qc--,j===pa?i=void 0:(Lc=i,i=pa),i!==pa?(a.length>Lc?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(Fb)),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa));g!==pa?(Nb.test(a.charAt(Lc))?(h=a.charAt(Lc),Lc++):(h=pa,0===Qc&&e(Ob)),h!==pa?(f=[f,g,h],d=f):(Lc=d,d=pa)):(Lc=d,d=pa)}else Lc=d,d=pa;return c=d!==pa?a.substring(c,Lc):d,c!==pa&&(Mc=b,c=Rb(c)),b=c,Rc[k]={nextPos:Lc,result:b},b}function S(){var b,c,d,f,g,h,i=59*Lc+38,j=Rc[i];if(j)return Lc=j.nextPos,j.result;if(b=Lc,c=Lc,d=Lc,Sb.test(a.charAt(Lc))?(f=a.charAt(Lc),Lc++):(f=pa,0===Qc&&e(Tb)),f!==pa){for(g=[],Ub.test(a.charAt(Lc))?(h=a.charAt(Lc),Lc++):(h=pa,0===Qc&&e(Vb));h!==pa;)g.push(h),Ub.test(a.charAt(Lc))?(h=a.charAt(Lc),Lc++):(h=pa,0===Qc&&e(Vb));g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)}else Lc=d,d=pa;return d===pa&&(Wb.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(Xb)),d===pa&&(d=Lc,Yb.test(a.charAt(Lc))?(f=a.charAt(Lc),Lc++):(f=pa,0===Qc&&e(Zb)),f!==pa?(g=S(),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa))),c=d!==pa?a.substring(c,Lc):d,c!==pa&&(Mc=b,c=$b(c)),b=c,Rc[i]={nextPos:Lc,result:b},b}function T(){var b,c,d,f,g,h,i,j=59*Lc+39,k=Rc[j];if(k)return Lc=k.nextPos,k.result;if(b=Lc,c=Lc,d=Lc,f=S(),f===pa&&(f=null),f!==pa)if(46===a.charCodeAt(Lc)?(g=nb,Lc++):(g=pa,0===Qc&&e(ob)),g!==pa){if(h=[],Ub.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Vb)),i!==pa)for(;i!==pa;)h.push(i),Ub.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Vb));else h=pa;h!==pa?(f=[f,g,h],d=f):(Lc=d,d=pa)}else Lc=d,d=pa;else Lc=d,d=pa;return c=d!==pa?a.substring(c,Lc):d,c!==pa&&(Mc=b,c=_b(c)),b=c,Rc[j]={nextPos:Lc,result:b},b}function U(){var b,c,d=59*Lc+40,f=Rc[d];return f?(Lc=f.nextPos,f.result):(b=Lc,a.substr(Lc,4)===ac?(c=ac,Lc+=4):(c=pa,0===Qc&&e(bc)),c!==pa&&(Mc=b,c=cc()),b=c,b===pa&&(b=Lc,a.substr(Lc,5)===dc?(c=dc,Lc+=5):(c=pa,0===Qc&&e(ec)),c!==pa&&(Mc=b,c=fc()),b=c),Rc[d]={nextPos:Lc,result:b},b)}function V(){var b,c,d,f,g,h,i,j,k=59*Lc+41,l=Rc[k];if(l)return Lc=l.nextPos,l.result;if(b=Lc,91===a.charCodeAt(Lc)?(c=cb,Lc++):(c=pa,0===Qc&&e(db)),c!==pa)if(d=ha(),d!==pa)if(f=Q(),f!==pa){for(g=[],h=Lc,i=ga(),i!==pa?(j=Q(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);h!==pa;)g.push(h),h=Lc,i=ga(),i!==pa?(j=Q(),j!==pa?(i=[i,j],h=i):(Lc=h,h=pa)):(Lc=h,h=pa);g!==pa?(h=ha(),h!==pa?(93===a.charCodeAt(Lc)?(i=eb,Lc++):(i=pa,0===Qc&&e(fb)),i!==pa?(Mc=b,c=ta(f,g),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)}else Lc=b,b=pa;else Lc=b,b=pa;else Lc=b,b=pa;return b===pa&&(b=Lc,91===a.charCodeAt(Lc)?(c=cb,Lc++):(c=pa,0===Qc&&e(db)),c!==pa?(d=ha(),d!==pa?(93===a.charCodeAt(Lc)?(f=eb,Lc++):(f=pa,0===Qc&&e(fb)),f!==pa?(Mc=b,c=gc(),b=c):(Lc=b,b=pa)):(Lc=b,b=pa)):(Lc=b,b=pa)),Rc[k]={nextPos:Lc,result:b},b}function W(){var b,c,d,f=59*Lc+42,g=Rc[f];if(g)return Lc=g.nextPos,g.result;if(b=Lc,c=[],hc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(ic)),d!==pa)for(;d!==pa;)c.push(d),hc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(ic));else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[f]={nextPos:Lc,result:b},b}function X(){var b,c,d,f,g,h=59*Lc+43,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=Lc,hc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(ic)),d!==pa){for(f=[],jc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(kc));g!==pa;)f.push(g),jc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(kc));f!==pa?(d=[d,f],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function Y(){var b,c,d,f,g,h=59*Lc+44,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=Lc,hc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(ic)),d!==pa){for(f=[],lc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(mc));g!==pa;)f.push(g),lc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(mc));f!==pa?(d=[d,f],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function Z(){var b,c,d,f,g,h=59*Lc+45,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=Lc,nc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(oc)),d!==pa){for(f=[],pc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(qc));g!==pa;)f.push(g),pc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(qc));f!==pa?(d=[d,f],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function $(){var b,c,d,f,g,h,i=59*Lc+46,j=Rc[i];if(j)return Lc=j.nextPos,j.result;if(b=Lc,c=Lc,d=Lc,f=_(),f!==pa?(46===a.charCodeAt(Lc)?(g=nb,Lc++):(g=pa,0===Qc&&e(ob)),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa),d===pa&&(d=null),d!==pa)if(rc.test(a.charAt(Lc))?(f=a.charAt(Lc),
Lc++):(f=pa,0===Qc&&e(sc)),f!==pa){for(g=[],tc.test(a.charAt(Lc))?(h=a.charAt(Lc),Lc++):(h=pa,0===Qc&&e(uc));h!==pa;)g.push(h),tc.test(a.charAt(Lc))?(h=a.charAt(Lc),Lc++):(h=pa,0===Qc&&e(uc));g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[i]={nextPos:Lc,result:b},b}function _(){var b,c,d,f,g,h=59*Lc+47,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=Lc,hc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(ic)),d!==pa){for(f=[],jc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(kc));g!==pa;)f.push(g),jc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(kc));f!==pa?(d=[d,f],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function aa(){var b,c,d,f,g,h,i,j,k=59*Lc+48,l=Rc[k];if(l)return Lc=l.nextPos,l.result;if(b=Lc,c=Lc,d=$(),d!==pa){if(f=[],g=Lc,47===a.charCodeAt(Lc)?(h=vc,Lc++):(h=pa,0===Qc&&e(wc)),h!==pa){if(i=[],pc.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(qc)),j!==pa)for(;j!==pa;)i.push(j),pc.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(qc));else i=pa;i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)}else Lc=g,g=pa;for(;g!==pa;)if(f.push(g),g=Lc,47===a.charCodeAt(Lc)?(h=vc,Lc++):(h=pa,0===Qc&&e(wc)),h!==pa){if(i=[],pc.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(qc)),j!==pa)for(;j!==pa;)i.push(j),pc.test(a.charAt(Lc))?(j=a.charAt(Lc),Lc++):(j=pa,0===Qc&&e(qc));else i=pa;i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)}else Lc=g,g=pa;f!==pa?(d=[d,f],c=d):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[k]={nextPos:Lc,result:b},b}function ba(){var b,c,d,f=59*Lc+49,g=Rc[f];if(g)return Lc=g.nextPos,g.result;if(b=Lc,c=[],xc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(yc)),d!==pa)for(;d!==pa;)c.push(d),xc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(yc));else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[f]={nextPos:Lc,result:b},b}function ca(){var b,c,d,f,g,h=59*Lc+50,i=Rc[h];if(i)return Lc=i.nextPos,i.result;if(b=Lc,c=[],d=Lc,f=Lc,Qc++,zc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Ac)),Qc--,g===pa?f=void 0:(Lc=f,f=pa),f!==pa?(a.length>Lc?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Fb)),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa),d!==pa)for(;d!==pa;)c.push(d),d=Lc,f=Lc,Qc++,zc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Ac)),Qc--,g===pa?f=void 0:(Lc=f,f=pa),f!==pa?(a.length>Lc?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Fb)),g!==pa?(f=[f,g],d=f):(Lc=d,d=pa)):(Lc=d,d=pa);else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b}function da(){var b,c,d,f,g,h=59*Lc+51,i=Rc[h];return i?(Lc=i.nextPos,i.result):(b=Lc,c=Lc,d=ha(),d!==pa?(a.substr(Lc,3)===Bc?(f=Bc,Lc+=3):(f=pa,0===Qc&&e(Cc)),f!==pa?(g=ha(),g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)):(Lc=c,c=pa)):(Lc=c,c=pa),b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b)}function ea(){var b,c,d,f,g,h=59*Lc+52,i=Rc[h];return i?(Lc=i.nextPos,i.result):(b=Lc,c=Lc,d=ha(),d!==pa?(124===a.charCodeAt(Lc)?(f=yb,Lc++):(f=pa,0===Qc&&e(zb)),f!==pa?(g=ha(),g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)):(Lc=c,c=pa)):(Lc=c,c=pa),b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b)}function fa(){var b,c,d,f,g,h=59*Lc+53,i=Rc[h];return i?(Lc=i.nextPos,i.result):(b=Lc,c=Lc,d=ha(),d!==pa?(44===a.charCodeAt(Lc)?(f=Dc,Lc++):(f=pa,0===Qc&&e(Ec)),f!==pa?(g=ha(),g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)):(Lc=c,c=pa)):(Lc=c,c=pa),b=c!==pa?a.substring(b,Lc):c,Rc[h]={nextPos:Lc,result:b},b)}function ga(){var b,c,d=59*Lc+54,e=Rc[d];return e?(Lc=e.nextPos,e.result):(b=Lc,c=fa(),c===pa&&(c=ha()),b=c!==pa?a.substring(b,Lc):c,Rc[d]={nextPos:Lc,result:b},b)}function ha(){var b,c,d,e=59*Lc+55,f=Rc[e];if(f)return Lc=f.nextPos,f.result;for(b=Lc,c=[],d=ja(),d===pa&&(d=ia());d!==pa;)c.push(d),d=ja(),d===pa&&(d=ia());return b=c!==pa?a.substring(b,Lc):c,Rc[e]={nextPos:Lc,result:b},b}function ia(){var b,c,d,f,g,h,i,j=59*Lc+56,k=Rc[j];if(k)return Lc=k.nextPos,k.result;if(b=Lc,c=Lc,35===a.charCodeAt(Lc)?(d=Fc,Lc++):(d=pa,0===Qc&&e(Gc)),d!==pa){for(f=[],g=Lc,h=Lc,Qc++,Hc.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Ic)),Qc--,i===pa?h=void 0:(Lc=h,h=pa),h!==pa?(a.length>Lc?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Fb)),i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)):(Lc=g,g=pa);g!==pa;)f.push(g),g=Lc,h=Lc,Qc++,Hc.test(a.charAt(Lc))?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Ic)),Qc--,i===pa?h=void 0:(Lc=h,h=pa),h!==pa?(a.length>Lc?(i=a.charAt(Lc),Lc++):(i=pa,0===Qc&&e(Fb)),i!==pa?(h=[h,i],g=h):(Lc=g,g=pa)):(Lc=g,g=pa);f!==pa?(Hc.test(a.charAt(Lc))?(g=a.charAt(Lc),Lc++):(g=pa,0===Qc&&e(Ic)),g===pa&&(g=null),g!==pa?(d=[d,f,g],c=d):(Lc=c,c=pa)):(Lc=c,c=pa)}else Lc=c,c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[j]={nextPos:Lc,result:b},b}function ja(){var b,c,d,f=59*Lc+57,g=Rc[f];if(g)return Lc=g.nextPos,g.result;if(b=Lc,c=[],Jc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(Kc)),d!==pa)for(;d!==pa;)c.push(d),Jc.test(a.charAt(Lc))?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(Kc));else c=pa;return b=c!==pa?a.substring(b,Lc):c,Rc[f]={nextPos:Lc,result:b},b}function ka(){var b,c,d,f=59*Lc+58,g=Rc[f];return g?(Lc=g.nextPos,g.result):(b=Lc,c=Lc,Qc++,a.length>Lc?(d=a.charAt(Lc),Lc++):(d=pa,0===Qc&&e(Fb)),Qc--,d===pa?c=void 0:(Lc=c,c=pa),b=c!==pa?a.substring(b,Lc):c,Rc[f]={nextPos:Lc,result:b},b)}function la(a,b){for(var c=a?[a]:[],d=0;d<b.length;d++)c[d+1]=b[d][b[d].length-1];return c}function ma(a,b){return b&&(a.metadata=b),a}var na,oa=arguments.length>1?arguments[1]:{},pa={},qa={system:g,type:l,heading:v,attribute:w,contract:F,constraint:o,literal:Q,metadata:O,lambda_expr:K,type_def:k,import_def:i},ra=g,sa=function(a,b,c,d){var e={types:b};return a&&a.length>0&&(e.imports=a),d&&(d={name:"Main",type:d},c&&(d.metadata=c),e.types.push(d)),e},ta=function(a,b){return la(a,b)},ua="@import",va={type:"literal",value:"@import",description:'"@import"'},wa="as",xa={type:"literal",value:"as",description:'"as"'},ya=function(a,b){return{qualifier:b,from:a}},za=function(a){return{from:a}},Aa="=",Ba={type:"literal",value:"=",description:'"="'},Ca=function(a,b,c){return ma({name:b,type:c},a)},Da=function(a,b,c){var d=la(b,c);return{union:ma({candidates:d})}},Ea=function(a,b,c){return{sub:ma({superType:b,constraints:c},a)}},Fa="(",Ga={type:"literal",value:"(",description:'"("'},Ha=")",Ia={type:"literal",value:")",description:'")"'},Ja=function(a,b){for(var c=0;c<b.length;c++)b[c]["native"]=[a,b[c]["native"]];return b},Ka=function(a){return[a]},La=":",Ma={type:"literal",value:":",description:'":"'},Na=function(a,b,c){return ma({name:b,"native":c.trim()},a)},Oa=function(a){return{"native":a.trim()}},Pa="{",Qa={type:"literal",value:"{",description:'"{"'},Ra="}",Sa={type:"literal",value:"}",description:'"}"'},Ta=function(a,b){return{tuple:ma({heading:b},a)}},Ua="{{",Va={type:"literal",value:"{{",description:'"{{"'},Wa="}}",Xa={type:"literal",value:"}}",description:'"}}"'},Ya=function(a,b){return{relation:ma({heading:b},a)}},Za=function(a,b,c){var d=la(a,b),e={attributes:d};return c&&(e.options={allowExtra:!0}),e},$a="?",_a={type:"literal",value:"?",description:'"?"'},ab=function(a,b,c,d){var e={name:b,type:d};return c&&(e.required=!1),ma(e,a)},bb=function(a,b){return{set:ma({elmType:b},a)}},cb="[",db={type:"literal",value:"[",description:'"["'},eb="]",fb={type:"literal",value:"]",description:'"]"'},gb=function(a,b){return{seq:ma({elmType:b},a)}},hb="<",ib={type:"literal",value:"<",description:'"<"'},jb=">",kb={type:"literal",value:">",description:'">"'},lb=function(a,b,c){var d=la(b,c);return{struct:ma({componentTypes:d},a)}},mb=function(a,b){a||(a={});for(var c,d=[],e=0;e<b.length;e++)c=b[e],c.external||c.explicit||(a.jsType?c.internal=a.jsType:c.identity={}),d[e]=c;return a.contracts=d,{adt:a}},nb=".",ob={type:"literal",value:".",description:'"."'},pb=function(a,b){var c={};return b&&(c.jsType=b[1]),ma(c,a)},qb="\\",rb={type:"literal",value:"\\",description:'"\\\\"'},sb=function(a,b,c){return a.explicit={dress:b,undress:c},a},tb=function(a,b){return a.external=b,a},ub=function(a,b,c){return ma({name:b,infoType:c},a)},vb=function(a){return{any:ma({},a)}},wb=function(a,b){return{builtin:ma({jsType:b},a)}},xb=function(a){return{ref:{typeName:a}}},yb="|",zb={type:"literal",value:"|",description:'"|"'},Ab=function(a,b){return[a.trim(),b.trim()]},Bb="()",Cb={type:"literal",value:"()",description:'"()"'},Db=/^[(,)]/,Eb={type:"class",value:"[(,)]",description:"[(,)]"},Fb={type:"any",description:"any character"},Gb="/-",Hb={type:"literal",value:"/-",description:'"/-"'},Ib="-/",Jb={type:"literal",value:"-/",description:'"-/"'},Kb=function(a,b){for(var c=la(a,b),d={},e=0;e<c.length;e++)d[c[e][0]]=c[e][1];return d},Lb=function(a){return{description:a.toString().trim()}},Mb=function(a,b){return[a,b]},Nb=/^["]/,Ob={type:"class",value:'["]',description:'["]'},Pb=/^[\\]/,Qb={type:"class",value:"[\\\\]",description:"[\\\\]"},Rb=function(a){return a.substring(1,a.length-1).replace(/\\"/,'"')},Sb=/^[1-9]/,Tb={type:"class",value:"[1-9]",description:"[1-9]"},Ub=/^[0-9]/,Vb={type:"class",value:"[0-9]",description:"[0-9]"},Wb=/^[0]/,Xb={type:"class",value:"[0]",description:"[0]"},Yb=/^[\-]/,Zb={type:"class",value:"[-]",description:"[-]"},$b=function(a){return parseInt(a)},_b=function(a){return parseFloat(a)},ac="true",bc={type:"literal",value:"true",description:'"true"'},cc=function(){return!0},dc="false",ec={type:"literal",value:"false",description:'"false"'},fc=function(){return!1},gc=function(){return[]},hc=/^[a-z]/,ic={type:"class",value:"[a-z]",description:"[a-z]"},jc=/^[a-z0-9]/,kc={type:"class",value:"[a-z0-9]",description:"[a-z0-9]"},lc=/^[a-zA-Z_]/,mc={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},nc=/^[a-z$_]/,oc={type:"class",value:"[a-z$_]",description:"[a-z$_]"},pc=/^[a-zA-Z0-9_]/,qc={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},rc=/^[A-Z]/,sc={type:"class",value:"[A-Z]",description:"[A-Z]"},tc=/^[a-zA-Z:]/,uc={type:"class",value:"[a-zA-Z:]",description:"[a-zA-Z:]"},vc="/",wc={type:"literal",value:"/",description:'"/"'},xc=/^[a-zA-Z0-9:.]/,yc={type:"class",value:"[a-zA-Z0-9:.]",description:"[a-zA-Z0-9:.]"},zc=/^[ \n\t]/,Ac={type:"class",value:"[ \\n\\t]",description:"[ \\n\\t]"},Bc="...",Cc={type:"literal",value:"...",description:'"..."'},Dc=",",Ec={type:"literal",value:",",description:'","'},Fc="#",Gc={type:"literal",value:"#",description:'"#"'},Hc=/^[\n]/,Ic={type:"class",value:"[\\n]",description:"[\\n]"},Jc=/^[ \t\n]/,Kc={type:"class",value:"[ \\t\\n]",description:"[ \\t\\n]"},Lc=0,Mc=0,Nc=[{line:1,column:1,seenCR:!1}],Oc=0,Pc=[],Qc=0,Rc={};if("startRule"in oa){if(!(oa.startRule in qa))throw new Error("Can't start parsing from rule \""+oa.startRule+'".');ra=qa[oa.startRule]}if(na=ra(),na!==pa&&Lc===a.length)return na;throw na!==pa&&Lc<a.length&&e({type:"end",description:"end of input"}),f(null,Pc,Oc<a.length?a.charAt(Oc):null,Oc<a.length?d(Oc,Oc+1):d(Oc,Oc))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],11:[function(a,b,c){(function(c){b.exports=function(){var b=(a("./stdlib/data"),function(a,b){return function(c,d){for(var e=0;e<a.length;e++)if(!a[e](c,d))return null;return b(c,d)}}),d=function(a,b,c){try{var f=a+(b||"");return e.statSync(f),[f,b||f.match(/(\.[a-z]{3,4})$/)[1]]}catch(g){if(0==c.length)throw new Error("No such file: `"+a+"`");return d(a,c[0],c.slice(1))}},e=a("fs"),f=b([function(a){return!!e}],function(a,b){var c=a.match(/^file:\/\/(.*?)$/);if(!c)return null;var f=d(c[1],null,[".fio",".json"]),g=f[0],h=f[1],i=e.readFileSync(g).toString(),j=null;switch(h){case".fio":j=b.Finitio.parse(i);break;case".json":j=JSON.parse(i);break;default:throw new Error("Unrecognized extension: `"+h+"`")}return[a,j]}),g=b([],function(a,b){var c=a.match(/^(\.\/)|^(\.\.\/)/);if(!c)return null;var d=b.sourceUrl;if(!d)throw new Error("Unable to resolve relative path: `"+a+"`");return d=d.replace(/\/[^\/]+$/,""),c[2]&&(d=d.replace(/\/[^\/]+$/,"")),d=d+"/"+a.slice(c[0].length),b.importResolver(d,b,{raw:!0})}),h=b([function(a){return!!c}],function(b,c){var d=b.match(/^finitio\/(.*)$/);if(!d)return null;var e=d[1];try{return a("./stdlib/"+e)(c,{raw:!0})}catch(f){throw new Error("No such stdlib system: `"+b+"`",f)}}),i=function(a,b,c){for(var d,e,f=Object.keys(i),g=0;g<f.length;g++)if(d=i[f[g]],e=d(a,b)){if(c&&c.raw)return e;var h=b.Finitio.world(b,{sourceUrl:e[0]});return b.Finitio.system(e[1],h)}throw new Error("Unable to resolve: `"+a+"`")};return i.File=f,i.StdLib=h,i.Relative=g,i}()}).call(this,"/build/src/finitio")},{"./stdlib/data":12,fs:38}],12:[function(a,b,c){b.exports=function(){var b={"http://finitio.io/0.4/stdlib/data":{types:[{name:"Any",type:{any:{}},metadata:{description:"Recognizes everything"}},{name:"Nil",type:{sub:{superType:{any:{}},constraints:[{"native":["v","v === null"]}]}},metadata:{description:"Recognizes JavaScript's null"}},{name:"Boolean",type:{builtin:{jsType:"Boolean"}},metadata:{description:"Recognizes true and false"}},{name:"True",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === true"]}]}},metadata:{description:"Only true"}},{name:"False",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === false"]}]}},metadata:{description:"Only false"}},{name:"Numeric",type:{builtin:{jsType:"Number"}},metadata:{description:"Recognizes any number"}},{name:"Real",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","(n===0.0) || !(n % 1 === 0)"]}]}},metadata:{description:"Recognizes only real numbers"}},{name:"Integer",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","n % 1 === 0"]}]}},metadata:{description:"Recognizes only integer numbers"}},{name:"String",type:{builtin:{jsType:"String"}},metadata:{description:"Recognizes every string"}},{name:"Date",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Date.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Date.milliseconds"}]}},metadata:{description:"Recognizes valid dates"}},{name:"Time",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Time.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Time.milliseconds"}]}},metadata:{description:"Recognizes valid times"}}]}},c=function(a){return function(c,d,e){var f=b[c];if(f)return e&&e.raw?[c,f]:d.Finitio.system(f,d);if(a)return a(c,d,e);throw new Error("Unable to resolve: `"+c+"`")}};return function(b,d){return b||(b=a("finitio.js").World),b=b.Finitio.world(b,{importResolver:c(b.importResolver)}),b.importResolver("http://finitio.io/0.4/stdlib/data",b,d)}}()},{}],13:[function(a,b,c){(function(){var c,d,e,f;c=a("./utils"),e=a("./ic").ObjectType,f=a("../type"),d=function(){function a(a,b,d,e){this.name=a,this.type=b,this.required=d,this.metadata=e,"string"!=typeof this.name&&c.argumentError("String expected for attribute name, got:",this.name),this.type instanceof f||c.argumentError("Type expected for attribute domain, got:",this.type),null==this.required&&(this.required=!0),"boolean"!=typeof this.required&&c.argumentError("Boolean expected for required, got:",this.required)}return e(a,["name","type","required","metadata"]),a.prototype.fetchType=function(){return this.type},a.prototype.fetchOn=function(a,b){if("object"!=typeof a&&c.argumentError("Object expected, got:",a),null==a[this.name]){if(null!=b)return b();throw new Error("Key `"+this.name+"` not found")}return a[this.name]},a.prototype.isSuperAttributeOf=function(a){return this===a||this.name===a.name&&(!this.required||a.required)&&this.type.isSuperTypeOf(a.type)},a.prototype.equals=function(b){return this===b||b instanceof a&&this.name===b.name&&this.required===b.required&&this.type.equals(b.type)},a.prototype.low=function(){return new a(this.name,this.type.low(),this.required)},a.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},a.prototype.toString=function(){return this.required?this.name+" : "+this.type:this.name+" :? "+this.type},a}(),b.exports=d}).call(this)},{"../type":25,"./ic":20,"./utils":23}],14:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("./utils"),e=a("../type"),d=function(a){function b(a,d,f){this.elmType=a,this.name=d,this.metadata=f,this.elmType instanceof e||c.argumentError("Finitio.Type expected, got:",this.elmType),b.__super__.constructor.call(this,this.name,this.metadata)}return f(b,a),b.prototype._equals=function(a){return this===a||a instanceof this.constructor&&this.elmType.equals(a.elmType)||b.__super__._equals.apply(this,arguments)},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof this.constructor&&this.elmType.isSuperTypeOf(a.elmType)||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._undress=function(a,b){var d,e;return d=this.elmType,e=b.elmType,e.isSuperTypeOf(d)?a:c.map(a,function(a){return d.undress(a,e)})},b}(e),b.exports=d}).call(this)},{"../type":25,"./utils":23}],15:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("./utils"),d=a("./ic").AbstractType,e=function(){function a(a,b,d){this.name=a,this["native"]=b,this.metadata=d,null!=this.name&&"string"!=typeof this.name&&c.argumentError("String expected for constraint name, got: ",this.name)}return a.prototype.isAnonymous=function(){return null==this.name},a.prototype.accept=function(a){throw new Error("Constraint is an abstract class")},a.prototype.equals=function(b){return this===b||b instanceof a&&this["native"]===b["native"]},a.prototype.toString=function(){var a;return a=this.nativeToString(),this.isAnonymous()||(a=this.name+": "+a),a},a.prototype.nativeToString=function(){return this["native"].toString()},a}(),e.Native=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="native",b.prototype.accept=function(a){return this["native"](a)},b.prototype.nativeToString=function(){return this["native"].finitioSourceCode||"..."},b}(e),e.Regexp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="regexp",b.prototype.accept=function(a){return this["native"].test(a)},b}(e),d(e,[e.Native,e.Regexp],["name","native","metadata"],1),b.exports=e}).call(this)},{"./ic":20,"./utils":23}],16:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;d=a("./ic").AbstractType,c=a("./utils"),f=a("../type"),e=function(){function a(a,b,d,e){this.name=a,this.infoType=b,this["native"]=d,this.metadata=e,c.isString(this.name)||c.argumentError("String expected, got:",this.name),this.infoType instanceof f||c.argumentError("Finitio.Type expected, got:",this.infoType)}return a.prototype.fetchType=function(){return this.infoType},a.prototype.resolveProxies=function(a){return this.infoType.resolveProxies(a)},a.prototype.toString=function(){return"<"+this.name+"> "+this.infoType.toString()},a}(),e.Explicit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="explicit",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a,b){return this["native"].undress(a)},b}(e),e.External=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="external",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a,b){return this["native"].undress(a)},b}(e),e.Internal=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="internal",b.prototype.dress=function(a,b){return this["native"][this.name](a,b)},b.prototype.undress=function(a,b){return a["to"+c.capitalize(this.name)]()},b}(e),e.Identity=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="identity",b.prototype.dress=function(a,b){return a},b.prototype.undress=function(a,b){return a},b}(e),d(e,[e.Explicit,e.External,e.Internal,e.Identity],["name","infoType","native","metadata"],2),b.exports=e}).call(this)},{"../type":25,"./ic":20,"./utils":23}],17:[function(a,b,c){(function(){var a,c;a=function(){function a(a,b,c){this.world=a,this.result=b,this.error=c}return a.prototype.success=function(b){return new a(this.world,b,void 0)},a.prototype.failure=function(b,c,d){return c={error:c},null!=d&&(c.children=d),new a(this.world,void 0,c)},a.prototype.find=function(a,b,d){var e,f,g,h,i,j;for(e=[],g=h=0,j=a.length;j>=0?j>h:h>j;g=j>=0?++h:--h){if(f=a[g],i=b(f,g),i.isSuccess())return i;null==i.error.location&&c(i.error,f,g),e.push(i.error)}return d(e)},a.prototype.refine=function(a,b,d,e){var f,g,h,i,j,k;if(a.isSuccess()){for(f=[],h=i=0,k=b.length;(k>=0?k>i:i>k)&&(g=b[h],j=d(a,g,h),!j.isFailure()||(null==j.error.location&&c(j.error,g,h),f.push(j.error),!this.isFailfast()));h=k>=0?++i:--i);return 0===f.length?a:e(f)}return e([a.error])},a.prototype.map=function(a,b,c){var d,e,f;return e=[],f=this.success(e),d=function(a,c,d){var f;return f=b(c,d),f.onSuccess(function(a){return e.push(a),f})},this.refine(f,a,d,c)},a.prototype.isFailfast=function(){return this.world&&this.world.failfast},a.prototype.isSuccess=function(){return void 0===this.error},a.prototype.isFailure=function(){return!this.isSuccess()},a.prototype.onSuccess=function(a){return this.isSuccess()?a(this.result):this},a.prototype.onFailure=function(a){return this.isSuccess()?this:a(this.error)},a}(),c=function(a,b,c){var d;return d=b.name,null==d&&(d=c),a.location=d},b.exports=a}).call(this)},{}],18:[function(a,b,c){(function(){var c;c=a("./utils"),b.exports=function(a,b,d,e){return null==d&&(d=b.slice(0,b.length-1)),null==e&&(e=function(a){return this[b][a]}),a.prototype.fetch=function(a,b){var c;if(c=e.bind(this)(a),null!=c)return c;if(null!=b)return b(this,a);throw new Error("No such "+d+" `"+a+"`")},a.prototype.fetchPath=function(a,b){var e;if(e=c.inject(a.split("/"),this,function(a,b){return a&&a.fetch&&a.fetch(b,function(){return null})}),null!=e)return e;if(null!=b)return b();throw new Error("No such "+d+" `"+a+"`")}}}).call(this)},{"./utils":23}],19:[function(a,b,c){(function(){var c,d,e,f,g;g=a("./ic").ObjectType,c=a("./utils"),e=a("./fetchable"),d=a("./attribute"),f=function(){function a(a,e){var f;this.attributes=a,this.options=e,c.isArray(this.attributes)&&c.every(this.attributes,function(a){return a instanceof d})||c.argumentError("Array of Attribute expected"),f={},c.each(this.attributes,function(a){return function(a){return null!=f[a.name]&&c.argumentError("Attribute names must be unique"),f[a.name]=a}}(this)),null==this.options&&(this.options={}),c.isObject(this.options)||c.argumentError("Hash of options expected"),this.options=c.extend({},b,this.options)}var b,f;return g(a,["attributes","options"]),e(a,"attributes","attribute",function(a){return this.getAttr(a)}),b={allowExtra:!1},a.prototype.getAttr=function(a){return c.find(this.attributes,function(b){return b.name===a})},a.prototype.size=function(){return this.attributes.length},a.prototype.isEmpty=function(){return 0===this.size()},a.prototype.allowExtra=function(){return this.options.allowExtra},a.prototype.multi=function(){return this.options.allowExtra||c.any(this.attributes,function(a){return!a.required})},a.prototype.each=function(a){return c.each(this.attributes,a)},a.prototype.toString=function(){var a;return a=c.map(this.attributes,function(a){return a.toString()}).join(", "),this.allowExtra()&&(this.isEmpty()||(a+=", "),a+="..."),a},a.prototype.names=function(){return c.map(this.attributes,function(a){return a.name})},a.prototype.isSuperHeadingOf=function(b){var d,e,g,h;return this===b?!0:b instanceof a?(g=c.triSplit(f(this),f(b)),h=g[0],d=g[1],e=g[2],c.every(h,function(a){return a[0].isSuperAttributeOf(a[1])})&&c.every(d,function(a){return!a.required})&&(this.allowExtra()||!b.allowExtra())&&(this.allowExtra()||c.isEmpty(e))):!1},a.prototype.equals=function(b){return this===b||b instanceof a&&this.attributesEquals(b)&&this.optionsEquals(b)},a.prototype.attributesEquals=function(a){return this.attributes.length===a.attributes.length&&c.every(this.attributes,function(b){return b.equals(a.getAttr(b.name))})},a.prototype.optionsEquals=function(a){return c.size(this.options)===c.size(a.options)&&c.every(this.options,function(b,c){return b===a.options[c]})},a.prototype.low=function(){var b,d;return b=c.map(this.attributes,function(a){return a.low()}),d=this.options,new a(b,d)},f=function(a){var b;return b={},c.each(a.attributes,function(a){return b[a.name]=a}),b},a.prototype.resolveProxies=function(a){return c.each(this.attributes,function(b){return b.resolveProxies(a)})},a}(),b.exports=f}).call(this)},{"./attribute":13,"./fetchable":18,"./ic":20,"./utils":23}],20:[function(a,b,c){b.exports=function(){function b(a,b){var c=function(){};c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}var c=a("./utils"),d={};return d.AbstractType=function(a,d,e,f){a.info=function(g){var h=c.find(d,function(a){return!!g[a.prototype.kind]});if(h){for(var i=[],j=0;j<e.length;j++){var k=j==f?h.prototype.kind:e[j],l=g[k];l&&(i[j]=l)}return b(h,i)}dump=JSON.stringify(g),c.argumentError("Unrecognized "+a.name+" info: ",dump)},a.prototype.toInfo=function(){for(var a={},b=0;b<e.length;b++){var c=b==f?this.kind:e[b],d=this[e[b]];void 0!=d&&(a[c]=d)}return a}},d.ObjectType=function(a,c,d){a.info=function(e,f){for(var g=[],h=0;h<c.length;h++){var i=e[c[h]];void 0!=i&&(g[h]=i)}var j=b(a,g);return d&&d(j,f),j},a.prototype.toInfo=function(){for(var a={},b=0;b<c.length;b++){var d=c[b],e=this[d];void 0!=e&&(a[d]=e)}return a}},d.TypeType=function(a,b,c){a.prototype.generator=b,d.ObjectType(a,c)},d}()},{"./utils":23}],21:[function(a,b,c){(function(){var c,d;d=a("../support/ic").ObjectType,c=function(){function a(a,b){this.from=a,this.qualifier=b}return d(a,["from","qualifier"],function(a,b){return a.system=b.importResolver(a.from,b)}),a}(),b.exports=c}).call(this)},{"../support/ic":20}],22:[function(a,b,c){b.exports=function(){var b=(a("../support/utils"),a("../support/attribute")),c=a("../support/heading"),d=a("../support/contract"),e=a("../support/constraint"),f=a("../support/import"),g=a("../contracts"),h=a("../type"),i=a("../type/ad_type"),j=a("../type/builtin_type"),l=a("../type/tuple_type"),m=a("../type/relation_type"),n=a("../type/union_type"),o=a("../type/seq_type"),p=a("../type/set_type"),q=a("../type/any_type"),r=a("../type/struct_type"),s=a("../type/sub_type"),t=a("../type/type_ref"),u=a("../type/type_def"),v=a("../system"),w={},x={Js:w};w.Object=j.info({jsType:Object}),w.String=j.info({jsType:String}),w.Boolean=j.info({jsType:Boolean}),w.Type=i.info({jsType:Function,contracts:[d.info({name:"jsTypeName",infoType:w.String,explicit:{dress:function(a,b){return g.JsType.name.dress(a,b.JsTypes)},undress:g.JsType.name.undress}})]}),w.Empty=s.info({superType:q.info({}),constraints:[e.info({name:"default","native":function(a){if(null===a||void 0===a)return!1;for(k in a)return!1;return!0}})]}),w.FunctionDefn=o.info({elmType:w.String}),w.Function=i.info({jsType:Function,contracts:[d.info({name:"defn",infoType:w.FunctionDefn,external:g.Expression.defn})]}),w.RegExp=i.info({jsType:RegExp,contracts:[d.info({name:"src",infoType:w.String,explicit:{dress:function(a){return new RegExp(a)},undress:function(a){return a.source}}})]});var y=b.info({name:"metadata",type:w.Object,required:!1}),z=function(a,b,c,e){return i.info({jsType:b,contracts:[d.info({name:e,infoType:c,internal:b})]})},A=function(a,b,d){d.push(y);var e=l.info({heading:c.info({attributes:d})}),f=z(a,b,e,"info");return f},B=[j.info({jsType:h})];x.Type=z("Type",h,n.info({candidates:B}),"factor"),x.Types=o.info({elmType:x.Type});var C=function(a,d,e){var f=l.info({heading:c.info({attributes:e.concat([y])})}),g=z(a,d,f,"info"),h=l.info({heading:c.info({attributes:[b.info({name:a.toLowerCase(),type:g})]})});return B.push(h),g};x.Attribute=A("Attribute",b,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type}),b.info({name:"required",type:w.Boolean,required:!1})]),x.Attributes=o.info({elmType:x.Attribute}),x.HeadingOptions=l.info({heading:c.info({attributes:[b.info({name:"allowExtra",type:w.Boolean})]})}),x.Heading=A("Heading",c,[b.info({name:"attributes",type:x.Attributes}),b.info({name:"options",type:x.HeadingOptions,required:!1})]),x.Contract=n.info({candidates:[],name:"Contract"}),x.Contracts=o.info({elmType:x.Contract});var D=function(a,c,e){var f=A(a,d,e.concat([b.info({name:"name",type:w.String}),b.info({name:"infoType",type:x.Type})]));return x.Contract.candidates.push(f),f};x.Contract.Explicit=D("Explicit",d.Explicit,[b.info({name:"explicit",type:l.info({heading:c.info({attributes:[b.info({name:"dress",type:w.Function}),b.info({name:"undress",type:w.Function})]})})})]),x.Contract.Internal=D("Internal",d.Internal,[b.info({name:"internal",type:w.Type})]),x.Contract.External=D("External",d.External,[b.info({name:"external",type:w.Type})]),x.Contract.Identity=D("Identity",d.Identity,[b.info({name:"identity",type:w.Empty})]),x.Constraint=n.info({candidates:[],name:"Constraint"}),x.Constraints=o.info({elmType:x.Constraint});var E=function(a,c,d){var f=A(a,e,d.concat([b.info({name:"name",type:w.String,required:!1})]));return x.Constraint.candidates.push(f),f};x.Constraint.Native=E("Native",e.Native,[b.info({name:"native",type:w.Function})]),x.Constraint.Regexp=E("RegExp",e.Regexp,[b.info({name:"regexp",type:w.RegExp})]),x.AnyType=C("Any",q,[]),x.AdType=C("Adt",i,[b.info({name:"jsType",type:w.Type,required:!1}),b.info({name:"contracts",type:x.Contracts})]),x.BuiltinType=C("Builtin",j,[b.info({name:"jsType",type:w.Type})]),x.SubType=C("Sub",s,[b.info({name:"superType",type:x.Type}),b.info({name:"constraints",type:x.Constraints})]),x.RelationType=C("Relation",m,[b.info({name:"heading",type:x.Heading})]),x.TupleType=C("Tuple",l,[b.info({name:"heading",type:x.Heading})]),x.SeqType=C("Seq",o,[b.info({name:"elmType",type:x.Type})]),x.SetType=C("Set",p,[b.info({name:"elmType",type:x.Type})]),x.StructType=C("Struct",r,[b.info({name:"componentTypes",type:x.Types})]),x.UnionType=C("Union",n,[b.info({name:"candidates",type:x.Types})]),x.TypeRef=C("Ref",t,[b.info({name:"typeName",type:w.String})]),x.TypeDef=A("TypeDef",u,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type})]),x.TypeDefs=o.info({elmType:x.TypeDef});var F=[b.info({name:"types",type:x.TypeDefs})];return x.System=A("System",v,F),x.Systems=o.info({elmType:x.System}),x.Import=A("Import",f,[b.info({name:"qualifier",type:w.String,required:!1}),b.info({name:"from",type:w.String})]),x.Imports=o.info({elmType:x.Import}),F.push(b.info({name:"imports",type:x.Imports,required:!1})),x}()},{"../contracts":4,"../support/attribute":13,"../support/constraint":15,"../support/contract":16,"../support/heading":19,"../support/import":21,"../support/utils":23,"../system":24,"../type":25,"../type/ad_type":26,"../type/any_type":27,"../type/builtin_type":28,"../type/relation_type":29,"../type/seq_type":30,"../type/set_type":31,"../type/struct_type":32,"../type/sub_type":33,"../type/tuple_type":34,"../type/type_def":35,"../type/type_ref":36,"../type/union_type":37}],23:[function(a,b,c){b.exports=function(){var b={};return b.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"==toString.call(a)},b.isBrowser=function(){return"object"==typeof window},b.isObject=function(a){return Object(a)===a},b.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},b.isFunction=function(a){
return"[object Function]"==Object.prototype.toString.call(a)},b.deepClone=function(a){if((null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)){if(a instanceof Function)return a;if(b.isArray(a))return a.slice();var c={};return b.each(a,function(a,d){c[d]=b.deepClone(a)}),c}return a},b.clone=function(a){return(null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a},b.extend=function(a){var c=Array.prototype.slice.call(arguments,1);return b.each(c,function(b){if(b)for(var c in b)a[c]=b[c]}),a},b.triSplit=function(a,c){var d=null,e={},f={},g={},h=null;d=b.keys(a);for(var i=0;i<d.length;i++)h=d[i],void 0===c[h]?f[h]=a[h]:e[h]=[a[h],c[h]];for(d=b.keys(c),i=0;i<d.length;i++)h=d[i],void 0===e[h]&&(g[h]=c[h]);return[e,f,g]},b.zip=function(a){b.isArray(a)||b.argumentError("Array expected, got",a);var c=Array.prototype.slice.call(arguments,1);b.each(c,function(c){b.isArray(c)||b.argumentError("Array expected, got",c),b.size(c)!=b.size(a)&&b.argumentError("Source(s) and destination Arrays must have same size")});var d=b.map(a,function(a,d){var e=[];return e.push(a),b.each(c,function(a){e.push(a[d])}),e});return d},b.difference=function(a,c){return b.isArray(a)||b.argumentError("Array expected, got",a),b.isArray(c)||b.argumentError("Array expected, got",c),b.filter(a,function(a){return!b.contains(c,a)})},b.uniq=function(a,c){b.isArray(a)||b.argumentError("Array expected, got",a),"undefined"==typeof c&&(c=!1);for(var d=[],e=[],f=0,g=a.length;g>f;f++){var h=a[f];(c?f&&e===h:b.contains(e,h))||(c?e=h:e.push(h),d.push(a[f]))}return d},b.inject=function(a,c,d){a instanceof Array||b.argumentError("Array expected, got",a),res=c;for(var e=0;e<a.length;e++)res=d(res,a[e]);return res},b.isEnumerable=function(a){return void 0===a||null===a||a instanceof RegExp||a instanceof Date||"boolean"==typeof a?!1:!0},b.each=function(a,c){if(null===c)throw new Error("Function expected, got null");if(void 0===c&&(c=function(){}),!b.isEnumerable(a))throw new Error("Enumerable (Array, Object, String) expected, got "+a);if("string"==typeof a)return b.each(a.split(""),c);if(a instanceof Array)for(var d=0;d<a.length;d++)c(a[d],d);else for(var e in a)a.hasOwnProperty(e)&&c(a[e],e)},b.every=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d!==!0)throw"fail"})}catch(d){if("fail"!=d)throw d;return!1}return!0},b.find=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d)throw{found:a}})}catch(d){if("undefined"==typeof d.found)throw d;return d.found}return null},b.any=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d===!0)throw"gotcha"})}catch(d){if("gotcha"!=d)throw d;return!0}return!1},b.filter=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)&&d.push(a)}),d},b.reject=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)||d.push(a)}),d},b.map=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a,b){d.push(c(a,b))}),d},b.values=function(a){if(a instanceof Array)return a;var c=[];return b.each(a,function(a){c.push(a)}),c},b.keys=function(a){var c=[];return b.each(a,function(a,b){c.push(b)}),c},b.size=function(a){var c=b.values(a);return c.length},b.isEmpty=function(a){return 0===b.size(a)},b.contains=b.include=function(a,c){b.isEnumerable(a)||b.argumentError("Enumerable (Array, Object, String) expected, got",a);var d=Array.prototype.indexOf;if(d&&a.indexOf===d)return-1!=a.indexOf(c);var e=b.find(a,function(a){return a===c});return null!=e},b.capitalize=function(a){if("string"!=typeof a&&b.argumentError("String expected, got",a),""===a.trim())return a;var c=a,d=null,e=null;if(-1!=c.indexOf("_")){for(d=c.split("_"),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}if(-1!=c.indexOf(" ")){for(d=c.split(" "),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}return c=c[0].toUpperCase()+c.slice(1)},b.toString=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=a.toString();return"[object Object]"==b&&(b=JSON.stringify(a)),b.length>30&&(b=b.substring(0,30)+"..."),a instanceof Array&&(b="["+b+"]"),b},b.argumentError=function(){var a="",c=function(a){return null===a?"null":void 0===a?"undefined":a.toString()};throw b.each(arguments,function(b){0!==a.length&&(a+=" "),a+=c(b)}),new Error(a)},b.notImplemented=function(a,b){throw new Error(a.constructor.name+"#"+b)},b.dressError=function(b){var c=a("../errors").TypeError;throw new c(b)},b.undressError=function(a,b,c){throw new Error(a,b,c)},b}()},{"../errors":9}],24:[function(a,b,c){(function(){var c,d,e,f,g;e=a("./support/ic").ObjectType,c=a("./support/utils"),d=a("./support/fetchable"),g=a("./type"),f=function(){function a(a,b){this.imports=a,this.types=b,null==this.imports&&(this.imports=[]),null==this.types&&(this.types=[]),c.each(this.types,function(a){return function(b){return a[b.name]=b.trueOne()}}(this))}return e(a,["imports","types"],function(a){return c.each(a.types,function(b){return b.resolveProxies(a)})}),a.REF_RGX=/^(?:([a-z][a-z0-9]*)\.)?(.*?)$/,d(a,"types","type",function(a){return c.find(this.types,function(b){return b.name===a})}),a.prototype.resolve=function(b,d){var e,f;return e=b.match(a.REF_RGX),e[1]?this._resolveQualified(e,d):(f=c.filter(this.imports,function(a){return!a.qualifier}),this._resolveImported([{system:this}].concat(f),b,d))},a.prototype.dress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.dress(a,b)},a.prototype.undress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.undress(a,this.Main.low())},a.prototype.clone=function(){return new a(c.clone(this.imports),c.clone(this.types))},a.prototype._resolveQualified=function(a,b){var d,e;return null==b&&(b=this._onResolveFailure(a[0])),d=c.find(this.imports,function(b){return b.qualifier===a[1]}),(e=d&&d.system)?this._resolveSingle(e,a[2],b):this._onResolveFailure(a[0])()},a.prototype._resolveImported=function(a,b,c){return null==c&&(c=this._onResolveFailure(b)),a[0].system.fetchPath(b,function(d){return function(){return a.length>1?d._resolveImported(a.slice(1),b,c):c()}}(this))},a.prototype._resolveSingle=function(a,b,c){return a.fetchPath(b,c)},a.prototype._onResolveFailure=function(a){return function(){throw new Error("No such type `"+a+"`")}},a}(),b.exports=f}).call(this)},{"./support/fetchable":18,"./support/ic":20,"./support/utils":23,"./type":25}],25:[function(a,b,c){(function(){var c,d,e;c=a("./support/utils"),d=a("./support/dress_monad"),e=function(){function a(a){this.metadata=a}return a.factor=function(a){return a[Object.keys(a)[0]]},a.prototype.toFactor=function(){var a;return a={},a[this.generator]=this,a},a.prototype.include=function(a){return this._include(a)},a.prototype._include=function(a){return c.notImplemented(this,"include")},a.prototype.dress=function(a,b){var e;return e=this.mDress(a,new d(b)),e.isSuccess()?e.result:c.dressError(e.error)},a.prototype.mDress=function(a,b){return this._mDress(a,b)},a.prototype._mDress=function(a,b){return c.notImplemented(this,"_mDress")},a.prototype.undress=function(a,b){return this._undress(a,b.trueOne())},a.prototype._undress=function(a,b){return b.isSuperTypeOf(this)?a:b.include(a)?a:c.undressError("Unable to undress `"+a+"` from "+this+" to `"+b+"`")},a.prototype.isSuperTypeOf=function(a){return this._isSuperTypeOf(a.trueOne())},a.prototype._isSuperTypeOf=function(a){return this.equals(a)||a._isSubTypeOf(this)},a.prototype._isSubTypeOf=function(a){return!1},a.prototype.fetchType=function(){return this},a.prototype.isFake=function(){return!1},a.prototype.trueOne=function(){return this},a.prototype.equals=function(b){return b instanceof a&&this._equals(b.trueOne())},a.prototype._equals=function(a){return this===a},a}(),b.exports=e}).call(this)},{"./support/dress_monad":17,"./support/utils":23}],26:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../support/fetchable"),e=a("../support/contract"),g=a("../type"),d=function(a){function b(a,d,f){this.jsType=a,this.contracts=d,this.metadata=f,!this.jsType||this.jsType instanceof Function||c.argumentError("Constructor (function) expected, got:",this.jsType),c.isArray(this.contracts)||c.argumentError("[Contract] expected, got:",this.contracts),c.every(this.contracts,function(a){return a instanceof e})||c.argumentError("[Contract] expected, got:",this.contracts),b.__super__.constructor.call(this,this.metadata)}return i(b,a),h(b,"adt",["jsType","contracts","metadata"]),f(b,"contracts","contract",function(a){return c.find(this.contracts,function(b){return b.name===a})}),b.prototype.contractNames=function(){return c.map(this.contracts,function(a){return a.name})},b.prototype._include=function(a){return a.constructor===this.jsType},b.prototype._mDress=function(a,b){var c,d;return this.jsType&&a instanceof this.jsType?b.success(a):(c=function(c){var d;return d=c.infoType.mDress(a,b),d.onSuccess(function(a){return function(d){var e;try{return b.success(c.dress(d,b.world))}catch(f){return e=f,b.failure(a,"Dresser failed: "+e.message,[e])}}}(this))},d=function(c){return function(d){var e;return e=[c.jsType&&c.jsType.name||"value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.contracts,c,d))},b.prototype._undress=function(a,d){var e;return this.jsType?(e=null,e=1===c.size(this.contracts)?this.contracts[0]:c.find(this.contracts,function(a){return a.infoType.isSuperTypeOf(d)}),null!=e?e.infoType.undress(e.undress(a),d):b.__super__._undress.apply(this,arguments)):a},b.prototype.low=function(){return this.contracts[0].infoType.low()},b.prototype.resolveProxies=function(a){return c.each(this.contracts,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.contracts,function(a){return a.toString()}).join(", ")},b}(g),b.exports=d}).call(this)},{"../support/contract":16,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],27:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a){this.metadata=a,b.__super__.constructor.call(this,this.metadata)}return f(b,a),e(b,"any",["metadata"]),b.prototype._mDress=function(a,b){return b.success(a)},b.prototype._include=function(a){return!0},b.prototype._isSuperTypeOf=function(a){return!0},b.prototype._equals=function(a){return a instanceof b||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.resolveProxies=function(a){},b.prototype.toString=function(){return"."},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],28:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a,c){this.jsType=a,this.metadata=c,this._equals=f(this._equals,this),b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"builtin",["jsType","metadata"]),b.prototype._mDress=function(a,b){var c;return this.include(a)?b.success(a):(c=[this.jsType.name,a],b.failure(this,["Invalid ${typeName}: `${value}`",c]))},b.prototype._include=function(a){return a instanceof this.jsType||null!=a&&a.constructor===this.jsType},b.prototype._equals=function(a){return this===a||a instanceof b&&a.jsType===this.jsType||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.toString=function(){return"."+this.jsType.name.toString()},b.prototype.resolveProxies=function(a){},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],29:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;i=a("../support/ic").TypeType,h=a("../type"),d=a("../support/collection_type"),g=a("../type/tuple_type"),e=a("../support/heading"),c=a("../support/utils"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading)}return j(b,a),i(b,"relation",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype.tupleType=function(){return null!=this.tupleTypeCache?this.tupleTypeCache:this.tupleTypeCache=new g(this.heading)},b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.tupleType().include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d,e,f;return a instanceof Array?(f=this.tupleType(),c={},d=function(a){var d;return d=f.mDress(a,b),d.onSuccess(function(a){return function(e){var f;return f=JSON.stringify(e),c[f]?b.failure(a,["Duplicate Tuple: `${value}`",[e]]):(c[f]=e,d)}}(this))},e=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Relation"]],c)}}(this),b.map(a,d,e)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g;return e instanceof b||e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),f=this.tupleType(),g=e instanceof b?e.tupleType():e.elmType,c.map(a,function(a){return f.undress(a,g)})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b.prototype.toString=function(){return"{{ "+this.heading.toString()+" }}"},b}(h),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25,"../type/tuple_type":34}],30:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),g(b,"seq",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?(c=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),d=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Sequence"]],c)}}(this),b.map(a,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"["+this.elmType.toString()+"]"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],31:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),g(b,"set",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))?c.uniq(a).length===a.length:!1},b.prototype._mDress=function(a,b){var d,e,f,g;return a instanceof Array?(f=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),g=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Set"]],c)}}(this),e=b.map(a,f,g),d=function(a){return c.find(a,function(b,c){return a.indexOf(b)!==c})},e.onSuccess(function(a){return function(c){var f,g;return(f=d(c))?(g=b.failure(a,["Duplicate value: `${value}`",[f]]),g.onFailure(function(c){return b.failure(a,"Invalid Set",[c])})):e}}(this))):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){return e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"{"+this.elmType.toString()+"}"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],32:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(a,d){var e;this.componentTypes=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),c.isArray(this.componentTypes)||c.argumentError("[Finitio::Type] expected, got:",this.componentTypes),e=c.find(this.componentTypes,function(a){return!(a instanceof f)}),null!=e&&c.argumentError("[Finitio::Type] expected, got:",e)}return h(b,a),g(b,"struct",["componentTypes","metadata"]),b.prototype.size=function(){return c.size(this.componentTypes)},b.prototype._include=function(a){return c.isArray(a)&&c.size(a)===c.size(this.componentTypes)&&c.every(c.zip(a,this.componentTypes),function(b){var c;return a=b[0],c=b[1],c.include(a)})},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?a.length!==this.size()?b.failure(this,["Struct size mismatch: ${a} for ${b}",[a.length,this.size()]]):(c=function(c){return function(c,d){return c.mDress(a[d],b)}}(this),d=function(c){return function(d){var e;return e=["Struct",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.map(this.componentTypes,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){var e,f;return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),d.size()!==this.size()&&c.undressError("Unable to undress `"+a+"` to `"+d+"`"),e=this.componentTypes,f=d.componentTypes,c.map(a,function(a,b){return e[b].undress(a,f[b])})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(c.zip(this.componentTypes,a.componentTypes),function(a){return a[0].isSuperTypeOf(a[1])})},b.prototype._equals=function(a){return this===a||a instanceof b&&this.headingEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.headingEquals=function(a){return c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(this.componentTypes,function(b,c){return a.componentTypes[c].equals(b)})},b.prototype.low=function(){var a;return a=c.map(this.componentTypes,function(a){return a.low()}),new b(a)},b.prototype.resolveProxies=function(a){return c.each(this.componentTypes,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return"<"+c.map(this.componentTypes,function(a){return a.toString()}).join(",")+">"},b}(f),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],33:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),e=a("../support/fetchable"),g=a("../type"),d=a("../support/constraint"),f=function(a){function b(a,e,f){this.superType=a,this.constraints=e,this.metadata=f,this.superType instanceof g||c.argumentError("Finitio.Type expected, got",this.superType),this.constraints.constructor!==Array&&c.argumentError("Array expected for constraints, got",this.constraints),this.constraints.length>0||c.argumentError("Empty constraints not allowed on SubType"),c.every(this.constraints,function(a){return a instanceof d})||c.argumentError("Array of constraints expected, got",this.constraints),b.__super__.constructor.call(this,this.metadata)}return i(b,a),h(b,"sub",["superType","constraints","metadata"]),e(b,"constraints","constraint",function(a){return c.find(this.constraints,function(b){return b.name===a})}),b.prototype._mDress=function(a,b){var c,d,e;return e=this.superType.mDress(a,b),c=function(c,d){var f,g;return d.accept(e.result)?e:(null!=d.name?(f="Invalid ${typeName} (not ${cName}): `${value}`",g=["value",d.name,a]):(f="Invalid ${typeName}: `${value}`",g=["value",a]),b.failure(d,[f,g]))},d=function(a){return function(c){return b.failure(a,c[0].error)}}(this),b.refine(e,this.constraints,c,d)},b.prototype._include=function(a){return this.superType.include(a)&&c.every(this.constraints,function(b){return b.accept(a)})},b.prototype._isSubTypeOf=function(a){return a.isSuperTypeOf(this.superType)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.superTypeEquals(a)&&this.constraintsEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this.superType.low()},b.prototype.toString=function(){return this.superType.toString()+"( x | ... )"},b.prototype.superTypeEquals=function(a){return this.superType.equals(a.superType)},b.prototype.constraintsEquals=function(a){return this.constraints.length===a.constraints.length&&c.every(c.zip(this.constraints,a.constraints),function(a){return a[0].equals(a[1])})},b.prototype.resolveProxies=function(a){return this.superType.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/constraint":15,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],34:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),g=a("../type"),e=a("../support/heading"),d=a("../support/collection_type"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading),b.__super__.constructor.call(this,this.metadata)}var d;return i(b,a),h(b,"tuple",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype._include=function(a){return"object"!=typeof a?!1:this.areAttributesValid(a)?c.every(this.heading.attributes,function(b){var c;return null!=a[b.name]?(c=a[b.name],b.type.include(c)):!0}):!1},b.prototype._mDress=function(a,b){var e,f,g,h,i;return a instanceof Object?(h={},i=b.success(h),f=function(c){return function(d,e){var f,g,j,k;return f=c.heading.getAttr(e)||null,g=a[e],void 0===g&&null!=f&&f.required?(j=b.failure(e,["Missing attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j})):null!=f||c.heading.allowExtra()?null!=f&&void 0!==g?(k=f.type.mDress(g,b),k.onFailure(function(a){return a.location=e,k}),k.onSuccess(function(a){return h[e]=a,i})):void 0!==g?(h[e]=g,i):i:(j=b.failure(e,["Unrecognized attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j}))}}(this),g=function(c){return function(d){var e;return e=["Tuple",a],b.failure(c,["Invalid ${typeName}",e],d)}}(this),e=d(this.heading),c.extend(e,a),e=Object.keys(e),b.refine(i,e,f,g)):b.failure(this,["Invalid Tuple: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g,h,i,j;return e instanceof b||c.undressError("Tuple cannot undress to `"+e+"` ("+e.constructor+")."),h=c.triSplit(d(this.heading),d(e.heading)),i=h[0],f=h[1],g=h[2],c.find(f,function(a){return a.required})&&c.undressError("Tuple undress does not allow projecting "+f),c.isEmpty(g)||c.undressError("Tuple undress does not support missing "+g),c.every(i,function(a){return a[0].required===a[1].required})||c.undressError("Tuple undress requires optional attributes to agree"),j={},this.heading.each(function(b){var c,d,f,g;return c=b.name,d=b.type,f=a[c],void 0!==f?(g=e.heading.getAttr(c).type,j[b.name]=d.undress(f,g)):void 0}),j},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.toString=function(){return"{ "+this.heading.toString()+" }"},d=function(a){var b;return b={},a.each(function(a){return b[a.name]=a}),b},b.prototype.attributeNames=function(){return c.map(this.heading.attributes,function(a){return a.name})},b.prototype.requiredAttributeNames=function(){return c.map(c.values(c.filter(this.heading.attributes,function(a){return a.required})),function(a){return a.name})},b.prototype.extraAttributes=function(a){return c.difference(c.keys(a),this.attributeNames())},b.prototype.missingAttributes=function(a){return c.difference(this.requiredAttributeNames(),c.keys(a))},b.prototype.areAttributesValid=function(a){return(this.heading.allowExtra()||c.isEmpty(this.extraAttributes(a)))&&c.isEmpty(this.missingAttributes(a))},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25}],35:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;d=a("../support/ic").ObjectType,e=a("../type"),c=a("../support/utils"),f=function(a){function b(a,d,e){this.type=a,this.name=d,this.metadata=e,this.name||c.argumentError("Name cannot be null on TypeDef"),b.__super__.constructor.call(this,this.metadata),this.generator=this.type.generator}return g(b,a),d(b,["type","name","metadata"]),b.prototype.fetch=function(){return this.type.fetch.apply(this.type,arguments)},b.prototype._include=function(a){return this.type.include(a)},b.prototype._mDress=function(a,b){var c;return c=this.type.mDress(a,b),c.onFailure(function(a){return function(b){return"Main"===a.name?b.typeName="Data":b.typeName=a.name,c}}(this))},b.prototype._undress=function(a,b){return this.type.undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.type.isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.type._isSubTypeOf(a)},b.prototype._equals=function(a){return this.type.equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.type},b.prototype.low=function(){return this.type.low()},b.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},b.prototype.toString=function(){return this.name},b}(e),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],36:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;f=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),e=function(a){function b(a,d,e){this.typeName=a,this.metadata=d,this.target=e,this.typeName||c.argumentError("Proxied ref cannot be null on TypeRef"),b.__super__.constructor.call(this,this.metadata)}return g(b,a),f(b,"ref",["typeName","metadata"]),b.prototype.fetch=function(){var a;return a=this.resolved(),a.fetch.apply(a,arguments)},b.prototype._include=function(a){return this.resolved().include(a)},b.prototype._mDress=function(a,b){return this.resolved().mDress(a,b)},b.prototype._undress=function(a,b){return this.resolved().undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.resolved().isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.resolved()._isSubTypeOf(a)},b.prototype._equals=function(a){return this.resolved().equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.resolved().trueOne()},b.prototype.low=function(){return this.resolved().low()},b.prototype.resolve=function(a){return null!=this.target?this.target:this.target=a.resolve(this.typeName).fetchType()},b.prototype.resolveProxies=function(a){return this.resolve(a)},b.prototype.resolved=function(){if(!this.target)throw new Error("Proxy is not resolved");return this.target},b.prototype.toString=function(){return this.typeName},b}(d),b.exports=e}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],37:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),f=function(a){function b(a,e){this.candidates=a,this.metadata=e,c.each(this.candidates,function(a){return a instanceof d?void 0:c.argumentError("Finitio.Type expected, got:",a)}),b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"union",["candidates","metadata"]),b.prototype._mDress=function(a,b){var c,d;return c=function(c){return c.mDress(a,b)},d=function(c){return function(d){var e;return e=["value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.candidates,c,d)},b.prototype._undress=function(a,b){var d;return this===b?a:(d=c.find(this.candidates,function(a){return b.isSuperTypeOf(a)}))?d.undress(a,b):(d=c.find(this.candidates,function(b){return b.include(a)}))?d.undress(a,b):c.undressError("Unable to undress `"+a+"` to `"+b+"`")},b.prototype._include=function(a){var b;return b=c.find(this.candidates,function(b){return b.include(a)}),null!=b},b.prototype._isSuperTypeOf=function(a){return this===a||c.any(this.candidates,function(b){return b.isSuperTypeOf(a)})||a instanceof b&&c.every(a.candidates,function(a){return function(b){return c.any(a.candidates,function(a){return a.isSuperTypeOf(b)})}}(this))||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.candidatesEquals(a,!0)||b.__super__._equals.apply(this,arguments)},b.prototype.candidatesEquals=function(a,b){var d;return d=c.every(this.candidates,function(b){return c.any(a.candidates,function(a){return b.equals(a)})}),d&&(!b||a.candidatesEquals(this,!1))},b.prototype.low=function(){throw"UnionType#low is not defined yet, sorry!"},b.prototype.resolveProxies=function(a){return c.each(this.candidates,function(b){
return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.candidates,function(a){return a.toString()}).join("|")},b}(d),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],38:[function(a,b,c){},{}]},{},[2]);