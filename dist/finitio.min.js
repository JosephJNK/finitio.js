!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={name:"finitio",version:"0.1.0",description:"Finitio is a language for capturing information structure.",main:"index.js",author:"Louis Lambeau <louislambeau@gmail.com>",license:"MIT",repository:{type:"git",url:"https://github.com/llambeau/finitio.js"},keywords:["finitio","typing","system","json","serialization","validation"],analyze:!0,bin:{"finitio-js":"./bin/finitio-js"},scripts:{test:"grunt",build:"grunt compile",prepublish:"grunt compile"},dependencies:{commander:"~2.2.0"},devDependencies:{"coffee-script":"~1.7.1",cucumber:"~0.4.0",underscore:"~1.6.0",shelljs:"~0.2.6",should:"~3.1.2",browserify:"~3.32.0",coffeeify:"~0.6.0",pegjs:"~0.8.0",grunt:"~0.4.2","grunt-cli":"~0.1.6","grunt-contrib-connect":"~0.7.1","grunt-contrib-watch":"~0.5.3","grunt-browserify":"~2.0.8","grunt-coffeelint":"0.0.8","grunt-cucumber":"git://github.com/llambeau/grunt-cucumber-js.git#master","grunt-saucelabs":"~5.0.1","grunt-mocha-test":"~0.9.4","grunt-contrib-coffee":"~0.10.1","grunt-contrib-copy":"~0.5.0","grunt-contrib-clean":"~0.5.0","grunt-contrib-uglify":"~0.4.0","grunt-peg":"~1.3.1","grunt-contrib-jshint":"~0.10.0","grunt-fixtures2js":"~0.1","grunt-shell":"~0.7.0"}}},{}],2:[function(a,b){(function(){var c,d,e;c=a("./finitio/support/utils"),d=function(){function b(){}return b.VERSION=a("../package.json").version,b.CONFORMANCE="0.4",b.World={Finitio:b,JsTypes:{Finitio:b,Number:Number,String:String,Boolean:Boolean,Date:Date,Function:Function,RegExp:RegExp},importResolver:a("./finitio/resolver")},b.world=function(){var a,d,f,g;for(d=c.clone(b.World),f=0,g=arguments.length;g>f;f++)a=arguments[f],a&&e(d,a);return d},b.parse=function(a,b){return this.Parser.parse(a,b||{})},b.system=function(a,b){return"string"==typeof a&&(a=this.parse(a)),this.Meta.System.dress(a,this.world(b))},b.bundleFile=function(a,b){return new this.Bundler(this.world(b)).addFile(a).flush()},b.bundleSource=function(a,b){return new this.Bundler(this.world(b)).addSource(a).flush()},b}(),e=function(a,b){var d,e,f;f=[];for(d in b)e=b[d],f.push("JsTypes"===d?a[d]=c.extend(a[d],e):a[d]=e);return f},d.TypeError=a("./finitio/errors").TypeError,d.Utils=a("./finitio/support/utils"),d.Contracts=a("./finitio/contracts"),d.Attribute=a("./finitio/support/attribute"),d.Contract=a("./finitio/support/contract"),d.Heading=a("./finitio/support/heading"),d.Constraint=a("./finitio/support/constraint"),d.System=a("./finitio/system"),d.Parser=a("./finitio/parser"),d.Bundler=a("./finitio/bundler"),d.Type=a("./finitio/type"),d.TypeDef=a("./finitio/type/type_def"),d.TypeRef=a("./finitio/type/type_ref"),d.AdType=a("./finitio/type/ad_type"),d.AnyType=a("./finitio/type/any_type"),d.BuiltinType=a("./finitio/type/builtin_type"),d.RelationType=a("./finitio/type/relation_type"),d.SeqType=a("./finitio/type/seq_type"),d.SetType=a("./finitio/type/set_type"),d.StructType=a("./finitio/type/struct_type"),d.SubType=a("./finitio/type/sub_type"),d.TupleType=a("./finitio/type/tuple_type"),d.UnionType=a("./finitio/type/union_type"),d.Meta=a("./finitio/support/meta"),b.exports=d}).call(this)},{"../package.json":1,"./finitio/bundler":3,"./finitio/contracts":4,"./finitio/errors":9,"./finitio/parser":10,"./finitio/resolver":11,"./finitio/support/attribute":13,"./finitio/support/constraint":15,"./finitio/support/contract":16,"./finitio/support/heading":19,"./finitio/support/meta":22,"./finitio/support/utils":23,"./finitio/system":24,"./finitio/type":25,"./finitio/type/ad_type":26,"./finitio/type/any_type":27,"./finitio/type/builtin_type":28,"./finitio/type/relation_type":29,"./finitio/type/seq_type":30,"./finitio/type/set_type":31,"./finitio/type/struct_type":32,"./finitio/type/sub_type":33,"./finitio/type/tuple_type":34,"./finitio/type/type_def":35,"./finitio/type/type_ref":36,"./finitio/type/union_type":37}],3:[function(a,b){(function(){var c,d,e,f,g;f=a("./parser"),e=a("./support/meta"),c=a("./support/utils"),g=a("fs"),d=function(){function a(a){this.world=a,this.systems={}}var b;return b="module.exports = (function(){\n  var ss = JSONDATA;\n  var r = function(fallback){\n    return function(path, w, options){\n      var s = ss[path];\n      if (s){\n        if (options && options.raw){\n          return [ path, s ];\n        } else {\n          return w.Finitio.system(s, w);\n        }\n      } else if (fallback) {\n        return fallback(path, w, options);\n      } else {\n        throw new Error('Unable to resolve: `' + path + '`');\n      }\n    };\n  };\n  return function(w, options){\n    if (!w) { w = require('finit' + 'io.js').World; }\n    w = w.Finitio.world(w, {\n      importResolver: r(w.importResolver)\n    });\n    return w.importResolver('URL', w, options);\n  };\n})();",a.prototype.flush=function(){return b.replace(/^[ ]{4}/,"").replace(/JSONDATA/,JSON.stringify(this.systems)).replace(/URL/,this.world.sourceUrl)},a.prototype.addDirectory=function(){throw new Error("Bundling directories is not supported")},a.prototype.addFile=function(a){var b;return g.lstatSync(a).isDirectory()?this.addDirectory(a):(b=g.readFileSync(a).toString(),this.addSource(b)),this},a.prototype.addSource=function(a){return this._bundle(this.world.Finitio.parse(a),this.world),this},a.prototype._bundle=function(a,b){var c,d,e,f,g,h,i;if(b.check&&b.Finitio.system(a,b),this.systems[b.sourceUrl]=a,a.imports){for(h=a.imports,i=[],f=0,g=h.length;g>f;f++)c=h[f],e=b.importResolver(c.from,b,{raw:!0}),c.from=e[0],d=b.Finitio.world(b,{sourceUrl:e[0]}),i.push(this._bundle(e[1],d));return i}},a}(),b.exports=d}).call(this)},{"./parser":10,"./support/meta":22,"./support/utils":23,fs:38}],4:[function(a,b){(function(){b.exports={Date:a("./contracts/date"),Time:a("./contracts/time"),Expression:a("./contracts/expression"),JsType:a("./contracts/js_type")}}).call(this)},{"./contracts/date":5,"./contracts/expression":6,"./contracts/js_type":7,"./contracts/time":8}],5:[function(a,b){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b)){var c=b.getFullYear().toString(),d=(b.getMonth()+1).toString(),e=b.getDate().toString();return c+"-"+(d[1]?d:"0"+d[0])+"-"+(e[1]?e:"0"+e[0])}throw new Error("Invalid Date `"+b+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],6:[function(a,b){b.exports=function(){return{defn:{dress:function(a){/^return/.test(a[a.length-1])||(a[a.length-1]="return "+a[a.length-1]);var b=Function.apply(Function,a);return b.defn=a,b},undress:function(a){if(!a.defn)throw new Error("No defn found: "+a.toString());return a.defn}}}}()},{}],7:[function(a,b){b.exports=function(){return{name:{dress:function(a,b){var c=null;if(c=b?new Function("world","return world."+a+";")(b):new Function("return "+a+";")())return c;throw msg="Unknown javascript type: `"+a+"` (",msg+=Object.keys(b).toString(),msg+=")",new Error(msg)},undress:function(){throw new Error("Unimplemented")}}}}()},{}],8:[function(a,b){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b))return b.toISOString();throw new Error("Invalid Date `"+s+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],9:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./support/utils"),d=function(a){function b(a){c.extend(this,a),this.message=g(this),b.__super__.constructor.call(this,this.message,this.rootCause)}return j(b,a),Object.defineProperty(b.prototype,"locatedMessage",{get:function(){return null!=this.location?"["+this.location+"] "+this.message:this.message}}),Object.defineProperty(b.prototype,"causes",{get:function(){return null!=this.causesCache?this.causesCache:this.causesCache=this.children&&f(this)}}),Object.defineProperty(b.prototype,"cause",{get:function(){return this.causes&&this.causes[0]}}),Object.defineProperty(b.prototype,"rootCauses",{get:function(){return null!=this.rootCausesCache?this.rootCausesCache:this.rootCausesCache=h(this,[])}}),Object.defineProperty(b.prototype,"rootCause",{get:function(){return this.rootCauses[this.rootCauses.length-1]}}),b.prototype.explain=function(){var a,b,c,d,e;if(b=this.locatedMessage+"\n",this.rootCauses)for(e=this.rootCauses,c=0,d=e.length;d>c;c++)a=e[c],b+="  "+a.locatedMessage+"\n";return b},b.prototype.explainTree=function(a){var b,c,d,e,f,g,h;for(d="",null==a&&(a=0),c=e=0;a>=0?a>e:e>a;c=a>=0?++e:--e)d+="  ";if(d+=this.locatedMessage+"\n",null!=this.causes)for(h=this.causes,f=0,g=h.length;g>f;f++)b=h[f],d+=b.explainTree(a+1);return d},b}(Error),g=function(a){var b,d,e,f;return e=a.error,e instanceof Array?(f=e,e=f[0],b=f[1],d=-1,e.replace(/\$\{([a-zA-Z]+)\}/g,function(){return function(e){var f;return d+=1,f=e.slice(2,e.length-1),c.toString(a[f]||b[d])}}(this))):"string"==typeof e?e:a.toString()},f=function(a){return c.map(a.children,function(b){return b.location=e(a.location,b.location),b instanceof d?b:new d(b instanceof Error?{error:b.message,location:b.location}:b)})},h=function(a,b){return a.causes?c.each(a.causes,function(a){return h(a,b)}):b.push(a),b},e=function(a,b){return null==b?a:null==a?b:a+"/"+b},b.exports={TypeError:d}}).call(this)},{"./support/utils":23}],10:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Nd!==b&&(Nd>b&&(Nd=0,Od={line:1,column:1,seenCR:!1}),c(Od,Nd,b),Nd=b),Od}function d(a){Pd>Ld||(Ld>Pd&&(Pd=Ld,Qd=[]),Qd.push(a))}function e(d,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=c(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==d?d:h(e,j),e,j,f,i.line,i.column)}function f(){var a,b,c,d,e,f,h,j,k,m,n,o=59*Ld+0,p=Sd[o];return p?(Ld=p.nextPos,p.result):(a=Ld,b=gb(),b!==ob?(c=g(),c!==ob?(d=gb(),d!==ob?(e=i(),e!==ob?(f=gb(),f!==ob?(h=N(),h===ob&&(h=sb),h!==ob?(j=gb(),j!==ob?(k=l(),k===ob&&(k=sb),k!==ob?(m=gb(),m!==ob?(n=jb(),n!==ob?(Md=a,b=tb(c,e,h,k),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb),Sd[o]={nextPos:Ld,result:a},a)}function g(){var a,b,c,d,e,f,g=59*Ld+1,i=Sd[g];if(i)return Ld=i.nextPos,i.result;if(a=Ld,b=h(),b===ob&&(b=sb),b!==ob){for(c=[],d=Ld,e=gb(),e!==ob?(f=h(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);d!==ob;)c.push(d),d=Ld,e=gb(),e!==ob?(f=h(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);c!==ob?(Md=a,b=ub(b,c),a=b):(Ld=a,a=rb)}else Ld=a,a=rb;return Sd[g]={nextPos:Ld,result:a},a}function h(){var b,c,e,f,g,h,i,j,k=59*Ld+2,l=Sd[k];return l?(Ld=l.nextPos,l.result):(b=Ld,a.substr(Ld,7)===vb?(c=vb,Ld+=7):(c=ob,0===Rd&&d(wb)),c!==ob?(e=ib(),e!==ob?(f=bb(),f!==ob?(g=ib(),g!==ob?(a.substr(Ld,2)===xb?(h=xb,Ld+=2):(h=ob,0===Rd&&d(yb)),h!==ob?(i=ib(),i!==ob?(j=$(),j!==ob?(Md=b,c=zb(f,j),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),b===ob&&(b=Ld,a.substr(Ld,7)===vb?(c=vb,Ld+=7):(c=ob,0===Rd&&d(wb)),c!==ob?(e=ib(),e!==ob?(f=bb(),f!==ob?(Md=b,c=Ab(f),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)),Sd[k]={nextPos:Ld,result:b},b)}function i(){var a,b,c,d,e,f,g=59*Ld+3,h=Sd[g];if(h)return Ld=h.nextPos,h.result;if(a=Ld,b=j(),b===ob&&(b=sb),b!==ob){for(c=[],d=Ld,e=gb(),e!==ob?(f=j(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);d!==ob;)c.push(d),d=Ld,e=gb(),e!==ob?(f=j(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);c!==ob?(Md=a,b=ub(b,c),a=b):(Ld=a,a=rb)}else Ld=a,a=rb;return Sd[g]={nextPos:Ld,result:a},a}function j(){var b,c,e,f,g,h,i,j=59*Ld+4,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(e=Z(),e!==ob?(f=gb(),f!==ob?(61===a.charCodeAt(Ld)?(g=Bb,Ld++):(g=ob,0===Rd&&d(Cb)),g!==ob?(h=gb(),h!==ob?(i=l(),i!==ob?(Md=b,c=Db(c,e,i),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function k(){var a,b=59*Ld+5,c=Sd[b];return c?(Ld=c.nextPos,c.result):(a=l(),Sd[b]={nextPos:Ld,result:a},a)}function l(){var a,b,c,d,e,f,g,h=59*Ld+6,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(a=Ld,b=N(),b===ob&&(b=sb),b!==ob)if(c=m(),c!==ob){if(d=[],e=Ld,f=db(),f!==ob?(g=m(),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb),e!==ob)for(;e!==ob;)d.push(e),e=Ld,f=db(),f!==ob?(g=m(),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb);else d=rb;d!==ob?(Md=a,b=Eb(b,c,d),a=b):(Ld=a,a=rb)}else Ld=a,a=rb;else Ld=a,a=rb;return a===ob&&(a=m()),Sd[h]={nextPos:Ld,result:a},a}function m(){var a,b,c,d,e=59*Ld+7,f=Sd[e];return f?(Ld=f.nextPos,f.result):(a=Ld,b=N(),b===ob&&(b=sb),b!==ob?(c=r(),c!==ob?(d=n(),d!==ob?(Md=a,b=Fb(b,c,d),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb),a===ob&&(a=r()),Sd[e]={nextPos:Ld,result:a},a)}function n(){var b,c,e,f,g,h,i,j,k=59*Ld+8,l=Sd[k];return l?(Ld=l.nextPos,l.result):(b=Ld,40===a.charCodeAt(Ld)?(c=Gb,Ld++):(c=ob,0===Rd&&d(Hb)),c!==ob?(e=gb(),e!==ob?(f=V(),f!==ob?(g=db(),g!==ob?(h=o(),h!==ob?(i=gb(),i!==ob?(41===a.charCodeAt(Ld)?(j=Ib,Ld++):(j=ob,0===Rd&&d(Jb)),j!==ob?(Md=b,c=Kb(f,h),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[k]={nextPos:Ld,result:b},b)}function o(){var a,b,c,d,e,f,g=59*Ld+9,h=Sd[g];if(h)return Ld=h.nextPos,h.result;if(a=Ld,b=p(),b!==ob){for(c=[],d=Ld,e=fb(),e!==ob?(f=p(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);d!==ob;)c.push(d),d=Ld,e=fb(),e!==ob?(f=p(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);c!==ob?(d=fb(),d!==ob?(Md=a,b=ub(b,c),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)}else Ld=a,a=rb;return a===ob&&(a=Ld,b=q(),b!==ob&&(Md=a,b=Lb(b)),a=b),Sd[g]={nextPos:Ld,result:a},a}function p(){var b,c,e,f,g,h,i=59*Ld+10,j=Sd[i];return j?(Ld=j.nextPos,j.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(e=X(),e!==ob?(58===a.charCodeAt(Ld)?(f=Mb,Ld++):(f=ob,0===Rd&&d(Nb)),f!==ob?(g=gb(),g!==ob?(h=K(),h!==ob?(Md=b,c=Ob(c,e,h),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[i]={nextPos:Ld,result:b},b)}function q(){var a,b,c=59*Ld+11,d=Sd[c];return d?(Ld=d.nextPos,d.result):(a=Ld,b=K(),b!==ob&&(Md=a,b=Pb(b)),a=b,Sd[c]={nextPos:Ld,result:a},a)}function r(){var a,b=59*Ld+12,c=Sd[b];return c?(Ld=c.nextPos,c.result):(a=t(),a===ob&&(a=s(),a===ob&&(a=w())),Sd[b]={nextPos:Ld,result:a},a)}function s(){var b,c,e,f,g,h,i,j=59*Ld+13,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(123===a.charCodeAt(Ld)?(e=Qb,Ld++):(e=ob,0===Rd&&d(Rb)),e!==ob?(f=gb(),f!==ob?(g=u(),g!==ob?(h=gb(),h!==ob?(125===a.charCodeAt(Ld)?(i=Sb,Ld++):(i=ob,0===Rd&&d(Tb)),i!==ob?(Md=b,c=Ub(c,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function t(){var b,c,e,f,g,h,i,j=59*Ld+14,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(a.substr(Ld,2)===Vb?(e=Vb,Ld+=2):(e=ob,0===Rd&&d(Wb)),e!==ob?(f=gb(),f!==ob?(g=u(),g!==ob?(h=gb(),h!==ob?(a.substr(Ld,2)===Xb?(i=Xb,Ld+=2):(i=ob,0===Rd&&d(Yb)),i!==ob?(Md=b,c=Zb(c,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function u(){var a,b,c,d,e,f,g=59*Ld+15,h=Sd[g];if(h)return Ld=h.nextPos,h.result;if(a=Ld,b=v(),b===ob&&(b=sb),b!==ob){for(c=[],d=Ld,e=fb(),e!==ob?(f=v(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);d!==ob;)c.push(d),d=Ld,e=fb(),e!==ob?(f=v(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);c!==ob?(d=fb(),d!==ob?(e=cb(),e===ob&&(e=sb),e!==ob?(Md=a,b=$b(b,c,e),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb)}else Ld=a,a=rb;return Sd[g]={nextPos:Ld,result:a},a}function v(){var b,c,e,f,g,h,i,j,k=59*Ld+16,m=Sd[k];return m?(Ld=m.nextPos,m.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(e=Y(),e!==ob?(f=gb(),f!==ob?(58===a.charCodeAt(Ld)?(g=Mb,Ld++):(g=ob,0===Rd&&d(Nb)),g!==ob?(63===a.charCodeAt(Ld)?(h=_b,Ld++):(h=ob,0===Rd&&d(ac)),h===ob&&(h=sb),h!==ob?(i=gb(),i!==ob?(j=l(),j!==ob?(Md=b,c=bc(c,e,h,j),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[k]={nextPos:Ld,result:b},b)}function w(){var a,b=59*Ld+17,c=Sd[b];return c?(Ld=c.nextPos,c.result):(a=x(),a===ob&&(a=y(),a===ob&&(a=z(),a===ob&&(a=A()))),Sd[b]={nextPos:Ld,result:a},a)}function x(){var b,c,e,f,g,h,i,j=59*Ld+18,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(123===a.charCodeAt(Ld)?(e=Qb,Ld++):(e=ob,0===Rd&&d(Rb)),e!==ob?(f=gb(),f!==ob?(g=l(),g!==ob?(h=gb(),h!==ob?(125===a.charCodeAt(Ld)?(i=Sb,Ld++):(i=ob,0===Rd&&d(Tb)),i!==ob?(Md=b,c=cc(c,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function y(){var b,c,e,f,g,h,i,j=59*Ld+19,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(91===a.charCodeAt(Ld)?(e=dc,Ld++):(e=ob,0===Rd&&d(ec)),e!==ob?(f=gb(),f!==ob?(g=l(),g!==ob?(h=gb(),h!==ob?(93===a.charCodeAt(Ld)?(i=fc,Ld++):(i=ob,0===Rd&&d(gc)),i!==ob?(Md=b,c=hc(c,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function z(){var b,c,e,f,g,h,i,j,k=59*Ld+20,m=Sd[k];if(m)return Ld=m.nextPos,m.result;if(b=Ld,c=N(),c===ob&&(c=sb),c!==ob)if(60===a.charCodeAt(Ld)?(e=ic,Ld++):(e=ob,0===Rd&&d(jc)),e!==ob)if(f=l(),f!==ob){for(g=[],h=Ld,i=fb(),i!==ob?(j=l(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);h!==ob;)g.push(h),h=Ld,i=fb(),i!==ob?(j=l(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);g!==ob?(h=fb(),h!==ob?(62===a.charCodeAt(Ld)?(i=kc,Ld++):(i=ob,0===Rd&&d(lc)),i!==ob?(Md=b,c=mc(c,f,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)}else Ld=b,b=rb;else Ld=b,b=rb;else Ld=b,b=rb;return Sd[k]={nextPos:Ld,result:b},b}function A(){var a,b=59*Ld+21,c=Sd[b];return c?(Ld=c.nextPos,c.result):(a=B(),a===ob&&(a=H(),a===ob&&(a=G(),a===ob&&(a=I()))),Sd[b]={nextPos:Ld,result:a},a)}function B(){var a,b,c,d,e=59*Ld+22,f=Sd[e];return f?(Ld=f.nextPos,f.result):(a=Ld,b=C(),b===ob&&(b=sb),b!==ob?(c=gb(),c!==ob?(d=D(),d!==ob?(Md=a,b=nc(b,d),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)):(Ld=a,a=rb),Sd[e]={nextPos:Ld,result:a},a)}function C(){var b,c,e,f,g,h=59*Ld+23,i=Sd[h];return i?(Ld=i.nextPos,i.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(e=Ld,46===a.charCodeAt(Ld)?(f=oc,Ld++):(f=ob,0===Rd&&d(pc)),f!==ob?(g=ab(),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb),e!==ob?(Md=b,c=qc(c,e),b=c):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[h]={nextPos:Ld,result:b},b)}function D(){var a,b,c,d,e,f,g=59*Ld+24,h=Sd[g];if(h)return Ld=h.nextPos,h.result;if(a=Ld,b=E(),b!==ob){for(c=[],d=Ld,e=fb(),e!==ob?(f=E(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);d!==ob;)c.push(d),d=Ld,e=fb(),e!==ob?(f=E(),f!==ob?(e=[e,f],d=e):(Ld=d,d=rb)):(Ld=d,d=rb);c!==ob?(d=fb(),d!==ob?(Md=a,b=ub(b,c),a=b):(Ld=a,a=rb)):(Ld=a,a=rb)}else Ld=a,a=rb;return Sd[g]={nextPos:Ld,result:a},a}function E(){var b,c,e,f,g,h,i,j,k=59*Ld+25,l=Sd[k];return l?(Ld=l.nextPos,l.result):(b=Ld,c=F(),c!==ob?(e=gb(),e!==ob?(92===a.charCodeAt(Ld)?(f=rc,Ld++):(f=ob,0===Rd&&d(sc)),f!==ob?(g=J(),g!==ob?(h=gb(),h!==ob?(92===a.charCodeAt(Ld)?(i=rc,Ld++):(i=ob,0===Rd&&d(sc)),i!==ob?(j=J(),j!==ob?(Md=b,c=tc(c,g,j),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),b===ob&&(b=Ld,c=F(),c!==ob?(e=gb(),e!==ob?(46===a.charCodeAt(Ld)?(f=oc,Ld++):(f=ob,0===Rd&&d(pc)),f!==ob?(g=ab(),g!==ob?(Md=b,c=uc(c,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),b===ob&&(b=F())),Sd[k]={nextPos:Ld,result:b},b)}function F(){var b,c,e,f,g,h,i,j=59*Ld+26,k=Sd[j];return k?(Ld=k.nextPos,k.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(60===a.charCodeAt(Ld)?(e=ic,Ld++):(e=ob,0===Rd&&d(jc)),e!==ob?(f=W(),f!==ob?(62===a.charCodeAt(Ld)?(g=kc,Ld++):(g=ob,0===Rd&&d(lc)),g!==ob?(h=gb(),h!==ob?(i=l(),i!==ob?(Md=b,c=vc(c,f,i),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[j]={nextPos:Ld,result:b},b)}function G(){var b,c,e,f=59*Ld+27,g=Sd[f];return g?(Ld=g.nextPos,g.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(46===a.charCodeAt(Ld)?(e=oc,Ld++):(e=ob,0===Rd&&d(pc)),e!==ob?(Md=b,c=wc(c),b=c):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[f]={nextPos:Ld,result:b},b)}function H(){var b,c,e,f,g=59*Ld+28,h=Sd[g];return h?(Ld=h.nextPos,h.result):(b=Ld,c=N(),c===ob&&(c=sb),c!==ob?(46===a.charCodeAt(Ld)?(e=oc,Ld++):(e=ob,0===Rd&&d(pc)),e!==ob?(f=ab(),f!==ob?(Md=b,c=xc(c,f),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[g]={nextPos:Ld,result:b},b)}function I(){var a,b,c=59*Ld+29,d=Sd[c];return d?(Ld=d.nextPos,d.result):(a=Ld,b=_(),b!==ob&&(Md=a,b=yc(b)),a=b,Sd[c]={nextPos:Ld,result:a},a)}function J(){var b,c,e,f,g,h,i,j,k,l,m=59*Ld+30,n=Sd[m];return n?(Ld=n.nextPos,n.result):(b=Ld,40===a.charCodeAt(Ld)?(c=Gb,Ld++):(c=ob,0===Rd&&d(Hb)),c!==ob?(e=gb(),e!==ob?(f=V(),f!==ob?(g=gb(),g!==ob?(124===a.charCodeAt(Ld)?(h=zc,Ld++):(h=ob,0===Rd&&d(Ac)),h!==ob?(i=gb(),i!==ob?(j=K(),j!==ob?(k=gb(),k!==ob?(41===a.charCodeAt(Ld)?(l=Ib,Ld++):(l=ob,0===Rd&&d(Jb)),l!==ob?(Md=b,c=Bc(f,j),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[m]={nextPos:Ld,result:b},b)}function K(){var b,c,d,e=59*Ld+31,f=Sd[e];if(f)return Ld=f.nextPos,f.result;if(b=Ld,c=[],d=L(),d===ob&&(d=M()),d!==ob)for(;d!==ob;)c.push(d),d=L(),d===ob&&(d=M());else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[e]={nextPos:Ld,result:b},b}function L(){var b,c,e,f,g,h=59*Ld+32,i=Sd[h];return i?(Ld=i.nextPos,i.result):(b=Ld,a.substr(Ld,2)===Cc?(c=Cc,Ld+=2):(c=ob,0===Rd&&d(Dc)),c===ob&&(c=Ld,40===a.charCodeAt(Ld)?(e=Gb,Ld++):(e=ob,0===Rd&&d(Hb)),e!==ob?(f=K(),f!==ob?(41===a.charCodeAt(Ld)?(g=Ib,Ld++):(g=ob,0===Rd&&d(Jb)),g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)):(Ld=c,c=rb)):(Ld=c,c=rb)),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b)}function M(){var b,c,e,f,g,h=59*Ld+33,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=[],e=Ld,f=Ld,Rd++,Fc.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Gc)),Rd--,g===ob?f=Ec:(Ld=f,f=rb),f!==ob?(a.length>Ld?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Hc)),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb),e!==ob)for(;e!==ob;)c.push(e),e=Ld,f=Ld,Rd++,Fc.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Gc)),Rd--,g===ob?f=Ec:(Ld=f,f=rb),f!==ob?(a.length>Ld?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Hc)),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb);else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function N(){var b,c,e,f,g,h,i,j,k=59*Ld+34,l=Sd[k];if(l)return Ld=l.nextPos,l.result;if(b=Ld,a.substr(Ld,2)===Ic?(c=Ic,Ld+=2):(c=ob,0===Rd&&d(Jc)),c!==ob)if(e=gb(),e!==ob)if(f=O(),f!==ob){for(g=[],h=Ld,i=fb(),i!==ob?(j=O(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);h!==ob;)g.push(h),h=Ld,i=fb(),i!==ob?(j=O(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);g!==ob?(h=gb(),h!==ob?(a.substr(Ld,2)===Kc?(i=Kc,Ld+=2):(i=ob,0===Rd&&d(Lc)),i!==ob?(j=gb(),j!==ob?(Md=b,c=Mc(f,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)}else Ld=b,b=rb;else Ld=b,b=rb;else Ld=b,b=rb;if(b===ob)if(b=Ld,a.substr(Ld,2)===Ic?(c=Ic,Ld+=2):(c=ob,0===Rd&&d(Jc)),c!==ob){if(e=Ld,f=[],g=Ld,h=Ld,Rd++,a.substr(Ld,2)===Kc?(i=Kc,Ld+=2):(i=ob,0===Rd&&d(Lc)),Rd--,i===ob?h=Ec:(Ld=h,h=rb),h!==ob?(a.length>Ld?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Hc)),i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)):(Ld=g,g=rb),g!==ob)for(;g!==ob;)f.push(g),g=Ld,h=Ld,Rd++,a.substr(Ld,2)===Kc?(i=Kc,Ld+=2):(i=ob,0===Rd&&d(Lc)),Rd--,i===ob?h=Ec:(Ld=h,h=rb),h!==ob?(a.length>Ld?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Hc)),i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)):(Ld=g,g=rb);else f=rb;f!==ob&&(f=a.substring(e,Ld)),e=f,e!==ob?(a.substr(Ld,2)===Kc?(f=Kc,Ld+=2):(f=ob,0===Rd&&d(Lc)),f!==ob?(g=gb(),g!==ob?(Md=b,c=Nc(e),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)}else Ld=b,b=rb;return Sd[k]={nextPos:Ld,result:b},b}function O(){var b,c,e,f,g,h,i=59*Ld+35,j=Sd[i];return j?(Ld=j.nextPos,j.result):(b=Ld,c=Y(),c!==ob?(e=ib(),e===ob&&(e=sb),e!==ob?(58===a.charCodeAt(Ld)?(f=Mb,Ld++):(f=ob,0===Rd&&d(Nb)),f!==ob?(g=ib(),g===ob&&(g=sb),g!==ob?(h=P(),h!==ob?(Md=b,c=Oc(c,h),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb),Sd[i]={nextPos:Ld,result:b},b)}function P(){var a,b=59*Ld+36,c=Sd[b];return c?(Ld=c.nextPos,c.result):(a=Q(),a===ob&&(a=S(),a===ob&&(a=R(),a===ob&&(a=T(),a===ob&&(a=U())))),Sd[b]={nextPos:Ld,result:a},a)}function Q(){var b,c,e,f,g,h,i,j,k=59*Ld+37,l=Sd[k];if(l)return Ld=l.nextPos,l.result;if(b=Ld,c=Ld,e=Ld,Pc.test(a.charAt(Ld))?(f=a.charAt(Ld),Ld++):(f=ob,0===Rd&&d(Qc)),f!==ob){for(g=[],h=Ld,Rc.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Sc)),i!==ob?(Pc.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Qc)),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb),h===ob&&(h=Ld,i=Ld,Rd++,Pc.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Qc)),Rd--,j===ob?i=Ec:(Ld=i,i=rb),i!==ob?(a.length>Ld?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Hc)),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb));h!==ob;)g.push(h),h=Ld,Rc.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Sc)),i!==ob?(Pc.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Qc)),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb),h===ob&&(h=Ld,i=Ld,Rd++,Pc.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Qc)),Rd--,j===ob?i=Ec:(Ld=i,i=rb),i!==ob?(a.length>Ld?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(Hc)),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb));g!==ob?(Pc.test(a.charAt(Ld))?(h=a.charAt(Ld),Ld++):(h=ob,0===Rd&&d(Qc)),h!==ob?(f=[f,g,h],e=f):(Ld=e,e=rb)):(Ld=e,e=rb)}else Ld=e,e=rb;return e!==ob&&(e=a.substring(c,Ld)),c=e,c!==ob&&(Md=b,c=Tc(c)),b=c,Sd[k]={nextPos:Ld,result:b},b}function R(){var b,c,e,f,g,h,i=59*Ld+38,j=Sd[i];if(j)return Ld=j.nextPos,j.result;if(b=Ld,c=Ld,e=Ld,Uc.test(a.charAt(Ld))?(f=a.charAt(Ld),Ld++):(f=ob,0===Rd&&d(Vc)),f!==ob){for(g=[],Wc.test(a.charAt(Ld))?(h=a.charAt(Ld),Ld++):(h=ob,0===Rd&&d(Xc));h!==ob;)g.push(h),Wc.test(a.charAt(Ld))?(h=a.charAt(Ld),Ld++):(h=ob,0===Rd&&d(Xc));g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)}else Ld=e,e=rb;return e===ob&&(Yc.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(Zc)),e===ob&&(e=Ld,$c.test(a.charAt(Ld))?(f=a.charAt(Ld),Ld++):(f=ob,0===Rd&&d(_c)),f!==ob?(g=R(),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb))),e!==ob&&(e=a.substring(c,Ld)),c=e,c!==ob&&(Md=b,c=ad(c)),b=c,Sd[i]={nextPos:Ld,result:b},b}function S(){var b,c,e,f,g,h,i,j=59*Ld+39,k=Sd[j];if(k)return Ld=k.nextPos,k.result;if(b=Ld,c=Ld,e=Ld,f=R(),f===ob&&(f=sb),f!==ob)if(46===a.charCodeAt(Ld)?(g=oc,Ld++):(g=ob,0===Rd&&d(pc)),g!==ob){if(h=[],Wc.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Xc)),i!==ob)for(;i!==ob;)h.push(i),Wc.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Xc));else h=rb;h!==ob?(f=[f,g,h],e=f):(Ld=e,e=rb)}else Ld=e,e=rb;else Ld=e,e=rb;return e!==ob&&(e=a.substring(c,Ld)),c=e,c!==ob&&(Md=b,c=bd(c)),b=c,Sd[j]={nextPos:Ld,result:b},b}function T(){var b,c,e=59*Ld+40,f=Sd[e];return f?(Ld=f.nextPos,f.result):(b=Ld,a.substr(Ld,4)===cd?(c=cd,Ld+=4):(c=ob,0===Rd&&d(dd)),c!==ob&&(Md=b,c=ed()),b=c,b===ob&&(b=Ld,a.substr(Ld,5)===fd?(c=fd,Ld+=5):(c=ob,0===Rd&&d(gd)),c!==ob&&(Md=b,c=hd()),b=c),Sd[e]={nextPos:Ld,result:b},b)}function U(){var b,c,e,f,g,h,i,j,k=59*Ld+41,l=Sd[k];if(l)return Ld=l.nextPos,l.result;if(b=Ld,91===a.charCodeAt(Ld)?(c=dc,Ld++):(c=ob,0===Rd&&d(ec)),c!==ob)if(e=gb(),e!==ob)if(f=P(),f!==ob){for(g=[],h=Ld,i=fb(),i!==ob?(j=P(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);h!==ob;)g.push(h),h=Ld,i=fb(),i!==ob?(j=P(),j!==ob?(i=[i,j],h=i):(Ld=h,h=rb)):(Ld=h,h=rb);g!==ob?(h=gb(),h!==ob?(93===a.charCodeAt(Ld)?(i=fc,Ld++):(i=ob,0===Rd&&d(gc)),i!==ob?(Md=b,c=ub(f,g),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)}else Ld=b,b=rb;else Ld=b,b=rb;else Ld=b,b=rb;return b===ob&&(b=Ld,91===a.charCodeAt(Ld)?(c=dc,Ld++):(c=ob,0===Rd&&d(ec)),c!==ob?(e=gb(),e!==ob?(93===a.charCodeAt(Ld)?(f=fc,Ld++):(f=ob,0===Rd&&d(gc)),f!==ob?(Md=b,c=id(),b=c):(Ld=b,b=rb)):(Ld=b,b=rb)):(Ld=b,b=rb)),Sd[k]={nextPos:Ld,result:b},b}function V(){var b,c,e,f=59*Ld+42,g=Sd[f];if(g)return Ld=g.nextPos,g.result;if(b=Ld,c=[],jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd)),e!==ob)for(;e!==ob;)c.push(e),jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd));else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[f]={nextPos:Ld,result:b},b}function W(){var b,c,e,f,g,h=59*Ld+43,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=Ld,jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd)),e!==ob){for(f=[],ld.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(md));g!==ob;)f.push(g),ld.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(md));f!==ob?(e=[e,f],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function X(){var b,c,e,f,g,h=59*Ld+44,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=Ld,jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd)),e!==ob){for(f=[],nd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(od));g!==ob;)f.push(g),nd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(od));f!==ob?(e=[e,f],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function Y(){var b,c,e,f,g,h=59*Ld+45,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=Ld,jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd)),e!==ob){for(f=[],pd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(qd));g!==ob;)f.push(g),pd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(qd));f!==ob?(e=[e,f],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function Z(){var b,c,e,f,g,h,i=59*Ld+46,j=Sd[i];if(j)return Ld=j.nextPos,j.result;if(b=Ld,c=Ld,e=Ld,f=$(),f!==ob?(46===a.charCodeAt(Ld)?(g=oc,Ld++):(g=ob,0===Rd&&d(pc)),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb),e===ob&&(e=sb),e!==ob)if(rd.test(a.charAt(Ld))?(f=a.charAt(Ld),Ld++):(f=ob,0===Rd&&d(sd)),f!==ob){for(g=[],td.test(a.charAt(Ld))?(h=a.charAt(Ld),Ld++):(h=ob,0===Rd&&d(ud));h!==ob;)g.push(h),td.test(a.charAt(Ld))?(h=a.charAt(Ld),Ld++):(h=ob,0===Rd&&d(ud));
g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[i]={nextPos:Ld,result:b},b}function $(){var b,c,e,f,g,h=59*Ld+47,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=Ld,jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(kd)),e!==ob){for(f=[],ld.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(md));g!==ob;)f.push(g),ld.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(md));f!==ob?(e=[e,f],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function _(){var b,c,e,f,g,h,i,j,k=59*Ld+48,l=Sd[k];if(l)return Ld=l.nextPos,l.result;if(b=Ld,c=Ld,e=Z(),e!==ob){if(f=[],g=Ld,47===a.charCodeAt(Ld)?(h=vd,Ld++):(h=ob,0===Rd&&d(wd)),h!==ob){if(i=[],pd.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(qd)),j!==ob)for(;j!==ob;)i.push(j),pd.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(qd));else i=rb;i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)}else Ld=g,g=rb;for(;g!==ob;)if(f.push(g),g=Ld,47===a.charCodeAt(Ld)?(h=vd,Ld++):(h=ob,0===Rd&&d(wd)),h!==ob){if(i=[],pd.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(qd)),j!==ob)for(;j!==ob;)i.push(j),pd.test(a.charAt(Ld))?(j=a.charAt(Ld),Ld++):(j=ob,0===Rd&&d(qd));else i=rb;i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)}else Ld=g,g=rb;f!==ob?(e=[e,f],c=e):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[k]={nextPos:Ld,result:b},b}function ab(){var b,c,e,f=59*Ld+49,g=Sd[f];if(g)return Ld=g.nextPos,g.result;if(b=Ld,c=[],xd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(yd)),e!==ob)for(;e!==ob;)c.push(e),xd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(yd));else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[f]={nextPos:Ld,result:b},b}function bb(){var b,c,e,f,g,h=59*Ld+50,i=Sd[h];if(i)return Ld=i.nextPos,i.result;if(b=Ld,c=[],e=Ld,f=Ld,Rd++,zd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Ad)),Rd--,g===ob?f=Ec:(Ld=f,f=rb),f!==ob?(a.length>Ld?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Hc)),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb),e!==ob)for(;e!==ob;)c.push(e),e=Ld,f=Ld,Rd++,zd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Ad)),Rd--,g===ob?f=Ec:(Ld=f,f=rb),f!==ob?(a.length>Ld?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Hc)),g!==ob?(f=[f,g],e=f):(Ld=e,e=rb)):(Ld=e,e=rb);else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b}function cb(){var b,c,e,f,g,h=59*Ld+51,i=Sd[h];return i?(Ld=i.nextPos,i.result):(b=Ld,c=Ld,e=gb(),e!==ob?(a.substr(Ld,3)===Bd?(f=Bd,Ld+=3):(f=ob,0===Rd&&d(Cd)),f!==ob?(g=gb(),g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)):(Ld=c,c=rb)):(Ld=c,c=rb),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b)}function db(){var b,c,e,f,g,h=59*Ld+52,i=Sd[h];return i?(Ld=i.nextPos,i.result):(b=Ld,c=Ld,e=gb(),e!==ob?(124===a.charCodeAt(Ld)?(f=zc,Ld++):(f=ob,0===Rd&&d(Ac)),f!==ob?(g=gb(),g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)):(Ld=c,c=rb)):(Ld=c,c=rb),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b)}function eb(){var b,c,e,f,g,h=59*Ld+53,i=Sd[h];return i?(Ld=i.nextPos,i.result):(b=Ld,c=Ld,e=gb(),e!==ob?(44===a.charCodeAt(Ld)?(f=Dd,Ld++):(f=ob,0===Rd&&d(Ed)),f!==ob?(g=gb(),g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)):(Ld=c,c=rb)):(Ld=c,c=rb),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[h]={nextPos:Ld,result:b},b)}function fb(){var b,c,d=59*Ld+54,e=Sd[d];return e?(Ld=e.nextPos,e.result):(b=Ld,c=eb(),c===ob&&(c=gb()),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[d]={nextPos:Ld,result:b},b)}function gb(){var b,c,d,e=59*Ld+55,f=Sd[e];if(f)return Ld=f.nextPos,f.result;for(b=Ld,c=[],d=ib(),d===ob&&(d=hb());d!==ob;)c.push(d),d=ib(),d===ob&&(d=hb());return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[e]={nextPos:Ld,result:b},b}function hb(){var b,c,e,f,g,h,i,j=59*Ld+56,k=Sd[j];if(k)return Ld=k.nextPos,k.result;if(b=Ld,c=Ld,35===a.charCodeAt(Ld)?(e=Fd,Ld++):(e=ob,0===Rd&&d(Gd)),e!==ob){for(f=[],g=Ld,h=Ld,Rd++,Hd.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Id)),Rd--,i===ob?h=Ec:(Ld=h,h=rb),h!==ob?(a.length>Ld?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Hc)),i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)):(Ld=g,g=rb);g!==ob;)f.push(g),g=Ld,h=Ld,Rd++,Hd.test(a.charAt(Ld))?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Id)),Rd--,i===ob?h=Ec:(Ld=h,h=rb),h!==ob?(a.length>Ld?(i=a.charAt(Ld),Ld++):(i=ob,0===Rd&&d(Hc)),i!==ob?(h=[h,i],g=h):(Ld=g,g=rb)):(Ld=g,g=rb);f!==ob?(Hd.test(a.charAt(Ld))?(g=a.charAt(Ld),Ld++):(g=ob,0===Rd&&d(Id)),g===ob&&(g=sb),g!==ob?(e=[e,f,g],c=e):(Ld=c,c=rb)):(Ld=c,c=rb)}else Ld=c,c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[j]={nextPos:Ld,result:b},b}function ib(){var b,c,e,f=59*Ld+57,g=Sd[f];if(g)return Ld=g.nextPos,g.result;if(b=Ld,c=[],Jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(Kd)),e!==ob)for(;e!==ob;)c.push(e),Jd.test(a.charAt(Ld))?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(Kd));else c=rb;return c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[f]={nextPos:Ld,result:b},b}function jb(){var b,c,e,f=59*Ld+58,g=Sd[f];return g?(Ld=g.nextPos,g.result):(b=Ld,c=Ld,Rd++,a.length>Ld?(e=a.charAt(Ld),Ld++):(e=ob,0===Rd&&d(Hc)),Rd--,e===ob?c=Ec:(Ld=c,c=rb),c!==ob&&(c=a.substring(b,Ld)),b=c,Sd[f]={nextPos:Ld,result:b},b)}function kb(a,b){for(var c=a?[a]:[],d=0;d<b.length;d++)c[d+1]=b[d][b[d].length-1];return c}function lb(a,b){return b&&(a.metadata=b),a}var mb,nb=arguments.length>1?arguments[1]:{},ob={},pb={system:f,type:k,heading:u,attribute:v,contract:E,constraint:n,literal:P,metadata:N,lambda_expr:J,type_def:j,import_def:h},qb=f,rb=ob,sb=null,tb=function(a,b,c,d){var e={types:b};return a&&a.length>0&&(e.imports=a),d&&(d={name:"Main",type:d},c&&(d.metadata=c),e.types.push(d)),e},ub=function(a,b){return kb(a,b)},vb="@import",wb={type:"literal",value:"@import",description:'"@import"'},xb="as",yb={type:"literal",value:"as",description:'"as"'},zb=function(a,b){return{qualifier:b,from:a}},Ab=function(a){return{from:a}},Bb="=",Cb={type:"literal",value:"=",description:'"="'},Db=function(a,b,c){return lb({name:b,type:c},a)},Eb=function(a,b,c){var d=kb(b,c);return{union:lb({candidates:d})}},Fb=function(a,b,c){return{sub:lb({superType:b,constraints:c},a)}},Gb="(",Hb={type:"literal",value:"(",description:'"("'},Ib=")",Jb={type:"literal",value:")",description:'")"'},Kb=function(a,b){for(var c=0;c<b.length;c++)b[c]["native"]=[a,b[c]["native"]];return b},Lb=function(a){return[a]},Mb=":",Nb={type:"literal",value:":",description:'":"'},Ob=function(a,b,c){return lb({name:b,"native":c.trim()},a)},Pb=function(a){return{"native":a.trim()}},Qb="{",Rb={type:"literal",value:"{",description:'"{"'},Sb="}",Tb={type:"literal",value:"}",description:'"}"'},Ub=function(a,b){return{tuple:lb({heading:b},a)}},Vb="{{",Wb={type:"literal",value:"{{",description:'"{{"'},Xb="}}",Yb={type:"literal",value:"}}",description:'"}}"'},Zb=function(a,b){return{relation:lb({heading:b},a)}},$b=function(a,b,c){var d=kb(a,b),e={attributes:d};return c&&(e.options={allowExtra:!0}),e},_b="?",ac={type:"literal",value:"?",description:'"?"'},bc=function(a,b,c,d){var e={name:b,type:d};return c&&(e.required=!1),lb(e,a)},cc=function(a,b){return{set:lb({elmType:b},a)}},dc="[",ec={type:"literal",value:"[",description:'"["'},fc="]",gc={type:"literal",value:"]",description:'"]"'},hc=function(a,b){return{seq:lb({elmType:b},a)}},ic="<",jc={type:"literal",value:"<",description:'"<"'},kc=">",lc={type:"literal",value:">",description:'">"'},mc=function(a,b,c){var d=kb(b,c);return{struct:lb({componentTypes:d},a)}},nc=function(a,b){a||(a={});for(var c,d=[],e=0;e<b.length;e++)c=b[e],c.external||c.explicit||(a.jsType?c.internal=a.jsType:c.identity={}),d[e]=c;return a.contracts=d,{adt:a}},oc=".",pc={type:"literal",value:".",description:'"."'},qc=function(a,b){var c={};return b&&(c.jsType=b[1]),lb(c,a)},rc="\\",sc={type:"literal",value:"\\",description:'"\\\\"'},tc=function(a,b,c){return a.explicit={dress:b,undress:c},a},uc=function(a,b){return a.external=b,a},vc=function(a,b,c){return lb({name:b,infoType:c},a)},wc=function(a){return{any:lb({},a)}},xc=function(a,b){return{builtin:lb({jsType:b},a)}},yc=function(a){return{ref:{typeName:a}}},zc="|",Ac={type:"literal",value:"|",description:'"|"'},Bc=function(a,b){return[a.trim(),b.trim()]},Cc="()",Dc={type:"literal",value:"()",description:'"()"'},Ec=void 0,Fc=/^[(,)]/,Gc={type:"class",value:"[(,)]",description:"[(,)]"},Hc={type:"any",description:"any character"},Ic="/-",Jc={type:"literal",value:"/-",description:'"/-"'},Kc="-/",Lc={type:"literal",value:"-/",description:'"-/"'},Mc=function(a,b){for(var c=kb(a,b),d={},e=0;e<c.length;e++)d[c[e][0]]=c[e][1];return d},Nc=function(a){return{description:a.toString().trim()}},Oc=function(a,b){return[a,b]},Pc=/^["]/,Qc={type:"class",value:'["]',description:'["]'},Rc=/^[\\]/,Sc={type:"class",value:"[\\\\]",description:"[\\\\]"},Tc=function(a){return a.substring(1,a.length-1).replace(/\\"/,'"')},Uc=/^[1-9]/,Vc={type:"class",value:"[1-9]",description:"[1-9]"},Wc=/^[0-9]/,Xc={type:"class",value:"[0-9]",description:"[0-9]"},Yc=/^[0]/,Zc={type:"class",value:"[0]",description:"[0]"},$c=/^[\-]/,_c={type:"class",value:"[\\-]",description:"[\\-]"},ad=function(a){return parseInt(a)},bd=function(a){return parseFloat(a)},cd="true",dd={type:"literal",value:"true",description:'"true"'},ed=function(){return!0},fd="false",gd={type:"literal",value:"false",description:'"false"'},hd=function(){return!1},id=function(){return[]},jd=/^[a-z]/,kd={type:"class",value:"[a-z]",description:"[a-z]"},ld=/^[a-z0-9]/,md={type:"class",value:"[a-z0-9]",description:"[a-z0-9]"},nd=/^[a-zA-Z_]/,od={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},pd=/^[a-zA-Z0-9_]/,qd={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},rd=/^[A-Z]/,sd={type:"class",value:"[A-Z]",description:"[A-Z]"},td=/^[a-zA-Z:]/,ud={type:"class",value:"[a-zA-Z:]",description:"[a-zA-Z:]"},vd="/",wd={type:"literal",value:"/",description:'"/"'},xd=/^[a-zA-Z0-9:.]/,yd={type:"class",value:"[a-zA-Z0-9:.]",description:"[a-zA-Z0-9:.]"},zd=/^[ \n\t]/,Ad={type:"class",value:"[ \\n\\t]",description:"[ \\n\\t]"},Bd="...",Cd={type:"literal",value:"...",description:'"..."'},Dd=",",Ed={type:"literal",value:",",description:'","'},Fd="#",Gd={type:"literal",value:"#",description:'"#"'},Hd=/^[\n]/,Id={type:"class",value:"[\\n]",description:"[\\n]"},Jd=/^[ \t\n]/,Kd={type:"class",value:"[ \\t\\n]",description:"[ \\t\\n]"},Ld=0,Md=0,Nd=0,Od={line:1,column:1,seenCR:!1},Pd=0,Qd=[],Rd=0,Sd={};if("startRule"in nb){if(!(nb.startRule in pb))throw new Error("Can't start parsing from rule \""+nb.startRule+'".');qb=pb[nb.startRule]}if(mb=qb(),mb!==ob&&Ld===a.length)return mb;throw mb!==ob&&Ld<a.length&&d({type:"end",description:"end of input"}),e(null,Qd,Pd)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],11:[function(a,b){(function(c){b.exports=function(){var b=(a("./stdlib/data"),function(a,b){return function(c,d){for(var e=0;e<a.length;e++)if(!a[e](c,d))return null;return b(c,d)}}),d=function(a,b,c){try{var f=a+(b||"");return e.statSync(f),[f,b||f.match(/(\.[a-z]{3,4})$/)[1]]}catch(g){if(0==c.length)throw new Error("No such file: `"+a+"`");return d(a,c[0],c.slice(1))}},e=a("fs"),f=b([function(){return!!e}],function(a,b){var c=a.match(/^file:\/\/(.*?)$/);if(!c)return null;var f=d(c[1],null,[".fio",".json"]),g=f[0],h=f[1],i=e.readFileSync(g).toString(),j=null;switch(h){case".fio":j=b.Finitio.parse(i);break;case".json":j=JSON.parse(i);break;default:throw new Error("Unrecognized extension: `"+h+"`")}return[a,j]}),g=b([],function(a,b){var c=a.match(/^(\.\/)|^(\.\.\/)/);if(!c)return null;var d=b.sourceUrl;if(!d)throw new Error("Unable to resolve relative path: `"+a+"`");return d=d.replace(/\/[^\/]+$/,""),c[2]&&(d=d.replace(/\/[^\/]+$/,"")),d=d+"/"+a.slice(c[0].length),b.importResolver(d,b,{raw:!0})}),h=b([function(){return!!c}],function(b,c){var d=b.match(/^finitio\/(.*)$/);if(!d)return null;var e=d[1];try{return a("./stdlib/"+e)(c,{raw:!0})}catch(f){throw new Error("No such stdlib system: `"+b+"`",f)}}),i=function(a,b,c){for(var d,e,f=Object.keys(i),g=0;g<f.length;g++)if(d=i[f[g]],e=d(a,b)){if(c&&c.raw)return e;var h=b.Finitio.world(b,{sourceUrl:e[0]});return b.Finitio.system(e[1],h)}throw new Error("Unable to resolve: `"+a+"`")};return i.File=f,i.StdLib=h,i.Relative=g,i}()}).call(this,"/finitio")},{"./stdlib/data":12,fs:38}],12:[function(a,b){b.exports=function(){var b={"http://finitio.io/0.4/stdlib/data":{types:[{name:"Any",type:{any:{}},metadata:{description:"Recognizes everything"}},{name:"Nil",type:{sub:{superType:{any:{}},constraints:[{"native":["v","v === null"]}]}},metadata:{description:"Recognizes JavaScript's null"}},{name:"Boolean",type:{builtin:{jsType:"Boolean"}},metadata:{description:"Recognizes true and false"}},{name:"True",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === true"]}]}},metadata:{description:"Only true"}},{name:"False",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === false"]}]}},metadata:{description:"Only false"}},{name:"Numeric",type:{builtin:{jsType:"Number"}},metadata:{description:"Recognizes any number"}},{name:"Real",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","(n===0.0) || !(n % 1 === 0)"]}]}},metadata:{description:"Recognizes only real numbers"}},{name:"Integer",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","n % 1 === 0"]}]}},metadata:{description:"Recognizes only integer numbers"}},{name:"String",type:{builtin:{jsType:"String"}},metadata:{description:"Recognizes every string"}},{name:"Date",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Date.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Date.milliseconds"}]}},metadata:{description:"Recognizes valid dates"}},{name:"Time",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Time.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Time.milliseconds"}]}},metadata:{description:"Recognizes valid times"}}]}},c=function(a){return function(c,d,e){var f=b[c];if(f)return e&&e.raw?[c,f]:d.Finitio.system(f,d);if(a)return a(c,d,e);throw new Error("Unable to resolve: `"+c+"`")}};return function(b,d){return b||(b=a("finitio.js").World),b=b.Finitio.world(b,{importResolver:c(b.importResolver)}),b.importResolver("http://finitio.io/0.4/stdlib/data",b,d)}}()},{}],13:[function(a,b){(function(){var c,d,e,f;c=a("./utils"),e=a("./ic").ObjectType,f=a("../type"),d=function(){function a(a,b,d,e){this.name=a,this.type=b,this.required=d,this.metadata=e,"string"!=typeof this.name&&c.argumentError("String expected for attribute name, got:",this.name),this.type instanceof f||c.argumentError("Type expected for attribute domain, got:",this.type),null==this.required&&(this.required=!0),"boolean"!=typeof this.required&&c.argumentError("Boolean expected for required, got:",this.required)}return e(a,["name","type","required","metadata"]),a.prototype.fetchType=function(){return this.type},a.prototype.fetchOn=function(a,b){if("object"!=typeof a&&c.argumentError("Object expected, got:",a),null==a[this.name]){if(null!=b)return b();throw new Error("Key `"+this.name+"` not found")}return a[this.name]},a.prototype.isSuperAttributeOf=function(a){return this===a||this.name===a.name&&(!this.required||a.required)&&this.type.isSuperTypeOf(a.type)},a.prototype.equals=function(b){return this===b||b instanceof a&&this.name===b.name&&this.required===b.required&&this.type.equals(b.type)},a.prototype.low=function(){return new a(this.name,this.type.low(),this.required)},a.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},a.prototype.toString=function(){return this.required?""+this.name+" : "+this.type:""+this.name+" :? "+this.type},a}(),b.exports=d}).call(this)},{"../type":25,"./ic":20,"./utils":23}],14:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./utils"),e=a("../type"),d=function(a){function b(a,d,f){this.elmType=a,this.name=d,this.metadata=f,this.elmType instanceof e||c.argumentError("Finitio.Type expected, got:",this.elmType),b.__super__.constructor.call(this,this.name,this.metadata)}return g(b,a),b.prototype._equals=function(a){return this===a||a instanceof this.constructor&&this.elmType.equals(a.elmType)||b.__super__._equals.apply(this,arguments)},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof this.constructor&&this.elmType.isSuperTypeOf(a.elmType)||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._undress=function(a,b){var d,e;return d=this.elmType,e=b.elmType,e.isSuperTypeOf(d)?a:c.map(a,function(a){return d.undress(a,e)})},b}(e),b.exports=d}).call(this)},{"../type":25,"./utils":23}],15:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./utils"),d=a("./ic").AbstractType,e=function(){function a(a,b,d){this.name=a,this["native"]=b,this.metadata=d,null!=this.name&&"string"!=typeof this.name&&c.argumentError("String expected for constraint name, got: ",this.name)}return a.prototype.isAnonymous=function(){return null==this.name},a.prototype.accept=function(){throw new Error("Constraint is an abstract class")},a.prototype.equals=function(b){return this===b||b instanceof a&&this["native"]===b["native"]},a.prototype.toString=function(){var a;return a=this.nativeToString(),this.isAnonymous()||(a=this.name+": "+a),a},a.prototype.nativeToString=function(){return this["native"].toString()},a}(),e.Native=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="native",b.prototype.accept=function(a){return this["native"](a)},b.prototype.nativeToString=function(){return this["native"].finitioSourceCode||"..."},b}(e),e.Regexp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="regexp",b.prototype.accept=function(a){return this["native"].test(a)},b}(e),d(e,[e.Native,e.Regexp],["name","native","metadata"],1),b.exports=e}).call(this)},{"./ic":20,"./utils":23}],16:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./ic").AbstractType,c=a("./utils"),f=a("../type"),e=function(){function a(a,b,d,e){this.name=a,this.infoType=b,this["native"]=d,this.metadata=e,c.isString(this.name)||c.argumentError("String expected, got:",this.name),this.infoType instanceof f||c.argumentError("Finitio.Type expected, got:",this.infoType)}return a.prototype.fetchType=function(){return this.infoType},a.prototype.resolveProxies=function(a){return this.infoType.resolveProxies(a)},a.prototype.toString=function(){return"<"+this.name+"> "+this.infoType.toString()},a}(),e.Explicit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="explicit",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a){return this["native"].undress(a)},b}(e),e.External=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="external",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a){return this["native"].undress(a)},b}(e),e.Internal=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="internal",b.prototype.dress=function(a,b){return this["native"][this.name](a,b)},b.prototype.undress=function(a){return a["to"+c.capitalize(this.name)]()},b}(e),e.Identity=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="identity",b.prototype.dress=function(a){return a},b.prototype.undress=function(a){return a},b}(e),d(e,[e.Explicit,e.External,e.Internal,e.Identity],["name","infoType","native","metadata"],2),b.exports=e}).call(this)},{"../type":25,"./ic":20,"./utils":23}],17:[function(a,b){(function(){var a,c;a=function(){function a(a,b,c){this.world=a,this.result=b,this.error=c}return a.prototype.success=function(b){return new a(this.world,b,void 0)},a.prototype.failure=function(b,c,d){return c={error:c},null!=d&&(c.children=d),new a(this.world,void 0,c)},a.prototype.find=function(a,b,d){var e,f,g,h,i,j;for(e=[],g=i=0,j=a.length;j>=0?j>i:i>j;g=j>=0?++i:--i){if(f=a[g],h=b(f,g),h.isSuccess())return h;null==h.error.location&&c(h.error,f,g),e.push(h.error)}return d(e)},a.prototype.refine=function(a,b,d,e){var f,g,h,i,j,k;if(a.isSuccess()){for(f=[],h=j=0,k=b.length;(k>=0?k>j:j>k)&&(g=b[h],i=d(a,g,h),!i.isFailure()||(null==i.error.location&&c(i.error,g,h),f.push(i.error),!this.isFailfast()));h=k>=0?++j:--j);return 0===f.length?a:e(f)}return e([a.error])},a.prototype.map=function(a,b,c){var d,e,f;return e=[],f=this.success(e),d=function(a,c,d){var f;return f=b(c,d),f.onSuccess(function(a){return e.push(a),f})},this.refine(f,a,d,c)},a.prototype.isFailfast=function(){return this.world&&this.world.failfast},a.prototype.isSuccess=function(){return void 0===this.error},a.prototype.isFailure=function(){return!this.isSuccess()},a.prototype.onSuccess=function(a){return this.isSuccess()?a(this.result):this},a.prototype.onFailure=function(a){return this.isSuccess()?this:a(this.error)},a}(),c=function(a,b,c){var d;return d=b.name,null==d&&(d=c),a.location=d},b.exports=a}).call(this)},{}],18:[function(a,b){(function(){var c;c=a("./utils"),b.exports=function(a,b,d,e){return null==d&&(d=b.slice(0,b.length-1)),null==e&&(e=function(a){return this[b][a]}),a.prototype.fetch=function(a,b){var c;if(c=e.bind(this)(a),null!=c)return c;if(null!=b)return b(this,a);throw new Error("No such "+d+" `"+a+"`")},a.prototype.fetchPath=function(a,b){var e;if(e=c.inject(a.split("/"),this,function(a,b){return a&&a.fetch&&a.fetch(b,function(){return null})}),null!=e)return e;if(null!=b)return b();throw new Error("No such "+d+" `"+a+"`")}}}).call(this)},{"./utils":23}],19:[function(a,b){(function(){var c,d,e,f,g;g=a("./ic").ObjectType,c=a("./utils"),e=a("./fetchable"),d=a("./attribute"),f=function(){function a(a,e){var f;this.attributes=a,this.options=e,c.isArray(this.attributes)&&c.every(this.attributes,function(a){return a instanceof d})||c.argumentError("Array of Attribute expected"),f={},c.each(this.attributes,function(){return function(a){return null!=f[a.name]&&c.argumentError("Attribute names must be unique"),f[a.name]=a}}(this)),null==this.options&&(this.options={}),c.isObject(this.options)||c.argumentError("Hash of options expected"),this.options=c.extend({},b,e)}var b,f;return g(a,["attributes","options"]),e(a,"attributes","attribute",function(a){return this.getAttr(a)}),b={allowExtra:!1},a.prototype.getAttr=function(a){return c.find(this.attributes,function(b){return b.name===a})},a.prototype.size=function(){return this.attributes.length},a.prototype.isEmpty=function(){return 0===this.size()},a.prototype.allowExtra=function(){return this.options.allowExtra},a.prototype.multi=function(){return this.options.allowExtra||c.any(this.attributes,function(a){return!a.required})},a.prototype.each=function(a){return c.each(this.attributes,a)},a.prototype.toString=function(){var a;return a=c.map(this.attributes,function(a){return a.toString()}).join(", "),this.allowExtra()&&(this.isEmpty()||(a+=", "),a+="..."),a},a.prototype.names=function(){return c.map(this.attributes,function(a){return a.name})},a.prototype.isSuperHeadingOf=function(b){var d,e,g,h;return this===b?!0:b instanceof a?(h=c.triSplit(f(this),f(b)),g=h[0],d=h[1],e=h[2],c.every(g,function(a){return a[0].isSuperAttributeOf(a[1])})&&c.every(d,function(a){return!a.required})&&(this.allowExtra()||!b.allowExtra())&&(this.allowExtra()||c.isEmpty(e))):!1},a.prototype.equals=function(b){return this===b||b instanceof a&&this.attributesEquals(b)&&this.optionsEquals(b)},a.prototype.attributesEquals=function(a){return this.attributes.length===a.attributes.length&&c.every(this.attributes,function(b){return b.equals(a.getAttr(b.name))})},a.prototype.optionsEquals=function(a){return c.size(this.options)===c.size(a.options)&&c.every(this.options,function(b,c){return b===a.options[c]})},a.prototype.low=function(){var b,d;return b=c.map(this.attributes,function(a){return a.low()}),d=this.options,new a(b,d)},f=function(a){var b;return b={},c.each(a.attributes,function(a){return b[a.name]=a}),b},a.prototype.resolveProxies=function(a){return c.each(this.attributes,function(b){return b.resolveProxies(a)})},a}(),b.exports=f}).call(this)},{"./attribute":13,"./fetchable":18,"./ic":20,"./utils":23}],20:[function(a,b){b.exports=function(){function b(a,b){var c=function(){};c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}var c=a("./utils"),d={};return d.AbstractType=function(a,d,e,f){a.info=function(g){var h=c.find(d,function(a){return!!g[a.prototype.kind]});if(h){for(var i=[],j=0;j<e.length;j++){var k=j==f?h.prototype.kind:e[j],l=g[k];l&&(i[j]=l)}return b(h,i)}dump=JSON.stringify(g),c.argumentError("Unrecognized "+a.name+" info: ",dump)},a.prototype.toInfo=function(){for(var a={},b=0;b<e.length;b++){var c=b==f?this.kind:e[b],d=this[e[b]];void 0!=d&&(a[c]=d)}return a}},d.ObjectType=function(a,c,d){a.info=function(e,f){for(var g=[],h=0;h<c.length;h++){var i=e[c[h]];void 0!=i&&(g[h]=i)}var j=b(a,g);return d&&d(j,f),j},a.prototype.toInfo=function(){for(var a={},b=0;b<c.length;b++){var d=c[b],e=this[d];void 0!=e&&(a[d]=e)}return a}},d.TypeType=function(a,b,c){a.prototype.generator=b,d.ObjectType(a,c)},d}()},{"./utils":23}],21:[function(a,b){(function(){var c,d;d=a("../support/ic").ObjectType,c=function(){function a(a,b){this.from=a,this.qualifier=b}return d(a,["from","qualifier"],function(a,b){return a.system=b.importResolver(a.from,b)}),a}(),b.exports=c}).call(this)},{"../support/ic":20}],22:[function(a,b){b.exports=function(){var b=(a("../support/utils"),a("../support/attribute")),c=a("../support/heading"),d=a("../support/contract"),e=a("../support/constraint"),f=a("../support/import"),g=a("../contracts"),h=a("../type"),i=a("../type/ad_type"),j=a("../type/builtin_type"),l=a("../type/tuple_type"),m=a("../type/relation_type"),n=a("../type/union_type"),o=a("../type/seq_type"),p=a("../type/set_type"),q=a("../type/any_type"),r=a("../type/struct_type"),s=a("../type/sub_type"),t=a("../type/type_ref"),u=a("../type/type_def"),v=a("../system"),w={},x={Js:w};w.Object=j.info({jsType:Object}),w.String=j.info({jsType:String}),w.Boolean=j.info({jsType:Boolean}),w.Type=i.info({jsType:Function,contracts:[d.info({name:"jsTypeName",infoType:w.String,explicit:{dress:function(a,b){return g.JsType.name.dress(a,b.JsTypes)},undress:g.JsType.name.undress}})]}),w.Empty=s.info({superType:q.info({}),constraints:[e.info({name:"default","native":function(a){if(null===a||void 0===a)return!1;for(k in a)return!1;return!0}})]}),w.FunctionDefn=o.info({elmType:w.String}),w.Function=i.info({jsType:Function,contracts:[d.info({name:"defn",infoType:w.FunctionDefn,external:g.Expression.defn})]}),w.RegExp=i.info({jsType:RegExp,contracts:[d.info({name:"src",infoType:w.String,explicit:{dress:function(a){return new RegExp(a)},undress:function(a){return a.source}}})]});var y=b.info({name:"metadata",type:w.Object,required:!1}),z=function(a,b,c,e){return i.info({jsType:b,contracts:[d.info({name:e,infoType:c,internal:b})]})},A=function(a,b,d){d.push(y);var e=l.info({heading:c.info({attributes:d})}),f=z(a,b,e,"info");return f},B=[j.info({jsType:h})];x.Type=z("Type",h,n.info({candidates:B}),"factor"),x.Types=o.info({elmType:x.Type});var C=function(a,d,e){var f=l.info({heading:c.info({attributes:e.concat([y])})}),g=z(a,d,f,"info"),h=l.info({heading:c.info({attributes:[b.info({name:a.toLowerCase(),type:g})]})});return B.push(h),g};x.Attribute=A("Attribute",b,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type}),b.info({name:"required",type:w.Boolean,required:!1})]),x.Attributes=o.info({elmType:x.Attribute}),x.HeadingOptions=l.info({heading:c.info({attributes:[b.info({name:"allowExtra",type:w.Boolean})]})}),x.Heading=A("Heading",c,[b.info({name:"attributes",type:x.Attributes}),b.info({name:"options",type:x.HeadingOptions,required:!1})]),x.Contract=n.info({candidates:[],name:"Contract"}),x.Contracts=o.info({elmType:x.Contract});var D=function(a,c,e){var f=A(a,d,e.concat([b.info({name:"name",type:w.String}),b.info({name:"infoType",type:x.Type})]));return x.Contract.candidates.push(f),f};x.Contract.Explicit=D("Explicit",d.Explicit,[b.info({name:"explicit",type:l.info({heading:c.info({attributes:[b.info({name:"dress",type:w.Function}),b.info({name:"undress",type:w.Function})]})})})]),x.Contract.Internal=D("Internal",d.Internal,[b.info({name:"internal",type:w.Type})]),x.Contract.External=D("External",d.External,[b.info({name:"external",type:w.Type})]),x.Contract.Identity=D("Identity",d.Identity,[b.info({name:"identity",type:w.Empty})]),x.Constraint=n.info({candidates:[],name:"Constraint"}),x.Constraints=o.info({elmType:x.Constraint});var E=function(a,c,d){var f=A(a,e,d.concat([b.info({name:"name",type:w.String,required:!1})]));return x.Constraint.candidates.push(f),f};x.Constraint.Native=E("Native",e.Native,[b.info({name:"native",type:w.Function})]),x.Constraint.Regexp=E("RegExp",e.Regexp,[b.info({name:"regexp",type:w.RegExp})]),x.AnyType=C("Any",q,[]),x.AdType=C("Adt",i,[b.info({name:"jsType",type:w.Type,required:!1}),b.info({name:"contracts",type:x.Contracts})]),x.BuiltinType=C("Builtin",j,[b.info({name:"jsType",type:w.Type})]),x.SubType=C("Sub",s,[b.info({name:"superType",type:x.Type}),b.info({name:"constraints",type:x.Constraints})]),x.RelationType=C("Relation",m,[b.info({name:"heading",type:x.Heading})]),x.TupleType=C("Tuple",l,[b.info({name:"heading",type:x.Heading})]),x.SeqType=C("Seq",o,[b.info({name:"elmType",type:x.Type})]),x.SetType=C("Set",p,[b.info({name:"elmType",type:x.Type})]),x.StructType=C("Struct",r,[b.info({name:"componentTypes",type:x.Types})]),x.UnionType=C("Union",n,[b.info({name:"candidates",type:x.Types})]),x.TypeRef=C("Ref",t,[b.info({name:"typeName",type:w.String})]),x.TypeDef=A("TypeDef",u,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type})]),x.TypeDefs=o.info({elmType:x.TypeDef});var F=[b.info({name:"types",type:x.TypeDefs})];return x.System=A("System",v,F),x.Systems=o.info({elmType:x.System}),x.Import=A("Import",f,[b.info({name:"qualifier",type:w.String,required:!1}),b.info({name:"from",type:w.String})]),x.Imports=o.info({elmType:x.Import}),F.push(b.info({name:"imports",type:x.Imports,required:!1})),x}()},{"../contracts":4,"../support/attribute":13,"../support/constraint":15,"../support/contract":16,"../support/heading":19,"../support/import":21,"../support/utils":23,"../system":24,"../type":25,"../type/ad_type":26,"../type/any_type":27,"../type/builtin_type":28,"../type/relation_type":29,"../type/seq_type":30,"../type/set_type":31,"../type/struct_type":32,"../type/sub_type":33,"../type/tuple_type":34,"../type/type_def":35,"../type/type_ref":36,"../type/union_type":37}],23:[function(a,b){b.exports=function(){var b={};return b.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"==toString.call(a)},b.isBrowser=function(){return"object"==typeof window},b.isObject=function(a){return Object(a)===a},b.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},b.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},b.deepClone=function(a){if((null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)){if(a instanceof Function)return a;if(b.isArray(a))return a.slice();var c={};return b.each(a,function(a,d){c[d]=b.deepClone(a)
}),c}return a},b.clone=function(a){return(null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a},b.extend=function(a){var c=Array.prototype.slice.call(arguments,1);return b.each(c,function(b){if(b)for(var c in b)a[c]=b[c]}),a},b.triSplit=function(a,c){var d=null,e={},f={},g={},h=null;d=b.keys(a);for(var i=0;i<d.length;i++)h=d[i],void 0===c[h]?f[h]=a[h]:e[h]=[a[h],c[h]];for(d=b.keys(c),i=0;i<d.length;i++)h=d[i],void 0===e[h]&&(g[h]=c[h]);return[e,f,g]},b.zip=function(a){b.isArray(a)||b.argumentError("Array expected, got",a);var c=Array.prototype.slice.call(arguments,1);b.each(c,function(c){b.isArray(c)||b.argumentError("Array expected, got",c),b.size(c)!=b.size(a)&&b.argumentError("Source(s) and destination Arrays must have same size")});var d=b.map(a,function(a,d){var e=[];return e.push(a),b.each(c,function(a){e.push(a[d])}),e});return d},b.difference=function(a,c){return b.isArray(a)||b.argumentError("Array expected, got",a),b.isArray(c)||b.argumentError("Array expected, got",c),b.filter(a,function(a){return!b.contains(c,a)})},b.uniq=function(a,c){b.isArray(a)||b.argumentError("Array expected, got",a),"undefined"==typeof c&&(c=!1);for(var d=[],e=[],f=0,g=a.length;g>f;f++){var h=a[f];(c?f&&e===h:b.contains(e,h))||(c?e=h:e.push(h),d.push(a[f]))}return d},b.inject=function(a,c,d){a instanceof Array||b.argumentError("Array expected, got",a),res=c;for(var e=0;e<a.length;e++)res=d(res,a[e]);return res},b.isEnumerable=function(a){return void 0===a||null===a||a instanceof RegExp||a instanceof Date||"boolean"==typeof a?!1:!0},b.each=function(a,c){if(null===c)throw new Error("Function expected, got null");if(void 0===c&&(c=function(){}),!b.isEnumerable(a))throw new Error("Enumerable (Array, Object, String) expected, got "+a);if("string"==typeof a)return b.each(a.split(""),c);if(a instanceof Array)for(var d=0;d<a.length;d++)c(a[d],d);else for(var e in a)a.hasOwnProperty(e)&&c(a[e],e)},b.every=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d!==!0)throw"fail"})}catch(d){if("fail"!=d)throw d;return!1}return!0},b.find=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d)throw{found:a}})}catch(d){if("undefined"==typeof d.found)throw d;return d.found}return null},b.any=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d===!0)throw"gotcha"})}catch(d){if("gotcha"!=d)throw d;return!0}return!1},b.filter=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)&&d.push(a)}),d},b.reject=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)||d.push(a)}),d},b.map=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a,b){d.push(c(a,b))}),d},b.values=function(a){if(a instanceof Array)return a;var c=[];return b.each(a,function(a){c.push(a)}),c},b.keys=function(a){var c=[];return b.each(a,function(a,b){c.push(b)}),c},b.size=function(a){var c=b.values(a);return c.length},b.isEmpty=function(a){return 0===b.size(a)},b.contains=b.include=function(a,c){b.isEnumerable(a)||b.argumentError("Enumerable (Array, Object, String) expected, got",a);var d=Array.prototype.indexOf;if(d&&a.indexOf===d)return-1!=a.indexOf(c);var e=b.find(a,function(a){return a===c});return null!=e},b.capitalize=function(a){if("string"!=typeof a&&b.argumentError("String expected, got",a),""===a.trim())return a;var c=a,d=null,e=null;if(-1!=c.indexOf("_")){for(d=c.split("_"),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}if(-1!=c.indexOf(" ")){for(d=c.split(" "),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}return c=c[0].toUpperCase()+c.slice(1)},b.toString=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=a.toString();return"[object Object]"==b&&(b=JSON.stringify(a)),b.length>30&&(b=b.substring(0,30)+"..."),a instanceof Array&&(b="["+b+"]"),b},b.argumentError=function(){var a="",c=function(a){return null===a?"null":void 0===a?"undefined":a.toString()};throw b.each(arguments,function(b){0!==a.length&&(a+=" "),a+=c(b)}),new Error(a)},b.notImplemented=function(a,b){throw new Error(a.constructor.name+"#"+b)},b.dressError=function(b){var c=a("../errors").TypeError;throw new c(b)},b.undressError=function(a,b,c){throw new Error(a,b,c)},b}()},{"../errors":9}],24:[function(a,b){(function(){var c,d,e,f,g;e=a("./support/ic").ObjectType,c=a("./support/utils"),d=a("./support/fetchable"),g=a("./type"),f=function(){function a(a,b){this.imports=a,this.types=b,null==this.imports&&(this.imports=[]),null==this.types&&(this.types=[]),c.each(this.types,function(a){return function(b){return a[b.name]=b.trueOne()}}(this))}return e(a,["imports","types"],function(a){return c.each(a.types,function(b){return b.resolveProxies(a)})}),a.REF_RGX=/^(?:([a-z][a-z0-9]*)\.)?(.*?)$/,d(a,"types","type",function(a){return c.find(this.types,function(b){return b.name===a})}),a.prototype.resolve=function(b,d){var e,f;return e=b.match(a.REF_RGX),e[1]?this._resolveQualified(e,d):(f=c.filter(this.imports,function(a){return!a.qualifier}),this._resolveImported([{system:this}].concat(f),b,d))},a.prototype.dress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.dress(a,b)},a.prototype.undress=function(a){if(!this.Main)throw new Error("No main on System");return this.Main.undress(a,this.Main.low())},a.prototype.clone=function(){return new a(c.clone(this.imports),c.clone(this.types))},a.prototype._resolveQualified=function(a,b){var d,e;return null==b&&(b=this._onResolveFailure(a[0])),d=c.find(this.imports,function(b){return b.qualifier===a[1]}),(e=d&&d.system)?this._resolveSingle(e,a[2],b):this._onResolveFailure(a[0])()},a.prototype._resolveImported=function(a,b,c){return null==c&&(c=this._onResolveFailure(b)),a[0].system.fetchPath(b,function(d){return function(){return a.length>1?d._resolveImported(a.slice(1),b,c):c()}}(this))},a.prototype._resolveSingle=function(a,b,c){return a.fetchPath(b,c)},a.prototype._onResolveFailure=function(a){return function(){throw new Error("No such type `"+a+"`")}},a}(),b.exports=f}).call(this)},{"./support/fetchable":18,"./support/ic":20,"./support/utils":23,"./type":25}],25:[function(a,b){(function(){var c,d,e;c=a("./support/utils"),d=a("./support/dress_monad"),e=function(){function a(a){this.metadata=a}return a.factor=function(a){return a[Object.keys(a)[0]]},a.prototype.toFactor=function(){var a;return a={},a[this.generator]=this,a},a.prototype.include=function(a){return this._include(a)},a.prototype._include=function(){return c.notImplemented(this,"include")},a.prototype.dress=function(a,b){var e;return e=this.mDress(a,new d(b)),e.isSuccess()?e.result:c.dressError(e.error)},a.prototype.mDress=function(a,b){return this._mDress(a,b)},a.prototype._mDress=function(){return c.notImplemented(this,"_mDress")},a.prototype.undress=function(a,b){return this._undress(a,b.trueOne())},a.prototype._undress=function(a,b){return b.isSuperTypeOf(this)?a:b.include(a)?a:c.undressError("Unable to undress `"+a+"` from "+this+" to `"+b+"`")},a.prototype.isSuperTypeOf=function(a){return this._isSuperTypeOf(a.trueOne())},a.prototype._isSuperTypeOf=function(a){return this.equals(a)||a._isSubTypeOf(this)},a.prototype._isSubTypeOf=function(){return!1},a.prototype.fetchType=function(){return this},a.prototype.isFake=function(){return!1},a.prototype.trueOne=function(){return this},a.prototype.equals=function(b){return b instanceof a&&this._equals(b.trueOne())},a.prototype._equals=function(a){return this===a},a}(),b.exports=e}).call(this)},{"./support/dress_monad":17,"./support/utils":23}],26:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../support/fetchable"),e=a("../support/contract"),g=a("../type"),d=function(a){function b(a,d,f){this.jsType=a,this.contracts=d,this.metadata=f,!this.jsType||this.jsType instanceof Function||c.argumentError("Constructor (function) expected, got:",this.jsType),c.isArray(this.contracts)||c.argumentError("[Contract] expected, got:",this.contracts),c.every(this.contracts,function(a){return a instanceof e})||c.argumentError("[Contract] expected, got:",this.contracts),b.__super__.constructor.call(this,this.metadata)}return j(b,a),h(b,"adt",["jsType","contracts","metadata"]),f(b,"contracts","contract",function(a){return c.find(this.contracts,function(b){return b.name===a})}),b.prototype.contractNames=function(){return c.map(this.contracts,function(a){return a.name})},b.prototype._include=function(a){return a.constructor===this.jsType},b.prototype._mDress=function(a,b){var c,d;return this.jsType&&a instanceof this.jsType?b.success(a):(c=function(c){var d;return d=c.infoType.mDress(a,b),d.onSuccess(function(a){return function(d){var e;try{return b.success(c.dress(d,b.world))}catch(f){return e=f,b.failure(a,"Dresser failed: "+e.message,[e])}}}(this))},d=function(c){return function(d){var e;return e=[c.jsType&&c.jsType.name||"value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.contracts,c,d))},b.prototype._undress=function(a,d){var e;return this.jsType?(e=null,e=1===c.size(this.contracts)?this.contracts[0]:c.find(this.contracts,function(a){return a.infoType.isSuperTypeOf(d)}),null!=e?e.infoType.undress(e.undress(a),d):b.__super__._undress.apply(this,arguments)):a},b.prototype.low=function(){return this.contracts[0].infoType.low()},b.prototype.resolveProxies=function(a){return c.each(this.contracts,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.contracts,function(a){return a.toString()}).join(", ")},b}(g),b.exports=d}).call(this)},{"../support/contract":16,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],27:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a){this.metadata=a,b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"any",["metadata"]),b.prototype._mDress=function(a,b){return b.success(a)},b.prototype._include=function(){return!0},b.prototype._isSuperTypeOf=function(){return!0},b.prototype._equals=function(a){return a instanceof b||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.resolveProxies=function(){},b.prototype.toString=function(){return"."},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],28:[function(a,b){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a,c){this.jsType=a,this.metadata=c,this._equals=f(this._equals,this),b.__super__.constructor.call(this,this.metadata)}return h(b,a),e(b,"builtin",["jsType","metadata"]),b.prototype._mDress=function(a,b){var c;return this.include(a)?b.success(a):(c=[this.jsType.name,a],b.failure(this,["Invalid ${typeName}: `${value}`",c]))},b.prototype._include=function(a){return a instanceof this.jsType||null!=a&&a.constructor===this.jsType},b.prototype._equals=function(a){return this===a||a instanceof b&&a.jsType===this.jsType||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.toString=function(){return"."+this.jsType.name.toString()},b.prototype.resolveProxies=function(){},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],29:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../support/ic").TypeType,h=a("../type"),d=a("../support/collection_type"),g=a("../type/tuple_type"),e=a("../support/heading"),c=a("../support/utils"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading)}return k(b,a),i(b,"relation",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype.tupleType=function(){return null!=this.tupleTypeCache?this.tupleTypeCache:this.tupleTypeCache=new g(this.heading)},b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.tupleType().include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d,e,f;return a instanceof Array?(f=this.tupleType(),c={},d=function(a){var d;return d=f.mDress(a,b),d.onSuccess(function(a){return function(e){var f;return f=JSON.stringify(e),c[f]?b.failure(a,["Duplicate Tuple: `${value}`",[e]]):(c[f]=e,d)}}(this))},e=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Relation"]],c)}}(this),b.map(a,d,e)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g;return e instanceof b||e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),f=this.tupleType(),g=e instanceof b?e.tupleType():e.elmType,c.map(a,function(a){return f.undress(a,g)})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b.prototype.toString=function(){return"{{ "+this.heading.toString()+" }}"},b}(h),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25,"../type/tuple_type":34}],30:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),g(b,"seq",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?(c=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),d=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Sequence"]],c)}}(this),b.map(a,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"["+this.elmType.toString()+"]"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],31:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),g(b,"set",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))?c.uniq(a).length===a.length:!1},b.prototype._mDress=function(a,b){var d,e,f,g;return a instanceof Array?(f=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),g=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Set"]],c)}}(this),e=b.map(a,f,g),d=function(a){return c.find(a,function(b,c){return a.indexOf(b)!==c})},e.onSuccess(function(a){return function(c){var f,g;return(f=d(c))?(g=b.failure(a,["Duplicate value: `${value}`",[f]]),g.onFailure(function(c){return b.failure(a,"Invalid Set",[c])})):e}}(this))):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){return e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"{"+this.elmType.toString()+"}"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],32:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(a,d){var e;this.componentTypes=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),c.isArray(this.componentTypes)||c.argumentError("[Finitio::Type] expected, got:",this.componentTypes),e=c.find(this.componentTypes,function(a){return!(a instanceof f)}),null!=e&&c.argumentError("[Finitio::Type] expected, got:",e)}return i(b,a),g(b,"struct",["componentTypes","metadata"]),b.prototype.size=function(){return c.size(this.componentTypes)},b.prototype._include=function(a){return c.isArray(a)&&c.size(a)===c.size(this.componentTypes)&&c.every(c.zip(a,this.componentTypes),function(b){var c;return a=b[0],c=b[1],c.include(a)})},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?a.length!==this.size()?b.failure(this,["Struct size mismatch: ${a} for ${b}",[a.length,this.size()]]):(c=function(){return function(c,d){return c.mDress(a[d],b)}}(this),d=function(c){return function(d){var e;return e=["Struct",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.map(this.componentTypes,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){var e,f;return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),d.size()!==this.size()&&c.undressError("Unable to undress `"+a+"` to `"+d+"`"),e=this.componentTypes,f=d.componentTypes,c.map(a,function(a,b){return e[b].undress(a,f[b])})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(c.zip(this.componentTypes,a.componentTypes),function(a){return a[0].isSuperTypeOf(a[1])})},b.prototype._equals=function(a){return this===a||a instanceof b&&this.headingEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.headingEquals=function(a){return c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(this.componentTypes,function(b,c){return a.componentTypes[c].equals(b)})},b.prototype.low=function(){var a;return a=c.map(this.componentTypes,function(a){return a.low()}),new b(a)},b.prototype.resolveProxies=function(a){return c.each(this.componentTypes,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return"<"+c.map(this.componentTypes,function(a){return a.toString()}).join(",")+">"},b}(f),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],33:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),e=a("../support/fetchable"),g=a("../type"),d=a("../support/constraint"),f=function(a){function b(a,e,f){this.superType=a,this.constraints=e,this.metadata=f,this.superType instanceof g||c.argumentError("Finitio.Type expected, got",this.superType),this.constraints.constructor!==Array&&c.argumentError("Array expected for constraints, got",this.constraints),this.constraints.length>0||c.argumentError("Empty constraints not allowed on SubType"),c.every(this.constraints,function(a){return a instanceof d})||c.argumentError("Array of constraints expected, got",this.constraints),b.__super__.constructor.call(this,this.metadata)}return j(b,a),h(b,"sub",["superType","constraints","metadata"]),e(b,"constraints","constraint",function(a){return c.find(this.constraints,function(b){return b.name===a})}),b.prototype._mDress=function(a,b){var c,d,e;return e=this.superType.mDress(a,b),c=function(c,d){var f,g;return d.accept(e.result)?e:(null!=d.name?(f="Invalid ${typeName} (not ${cName}): `${value}`",g=["value",d.name,a]):(f="Invalid ${typeName}: `${value}`",g=["value",a]),b.failure(d,[f,g]))},d=function(a){return function(c){return b.failure(a,c[0].error)}}(this),b.refine(e,this.constraints,c,d)},b.prototype._include=function(a){return this.superType.include(a)&&c.every(this.constraints,function(b){return b.accept(a)})},b.prototype._isSubTypeOf=function(a){return a.isSuperTypeOf(this.superType)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.superTypeEquals(a)&&this.constraintsEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this.superType.low()},b.prototype.toString=function(){return this.superType.toString()+"( x | ... )"},b.prototype.superTypeEquals=function(a){return this.superType.equals(a.superType)},b.prototype.constraintsEquals=function(a){return this.constraints.length===a.constraints.length&&c.every(c.zip(this.constraints,a.constraints),function(a){return a[0].equals(a[1])})},b.prototype.resolveProxies=function(a){return this.superType.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/constraint":15,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],34:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),g=a("../type"),e=a("../support/heading"),d=a("../support/collection_type"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading),b.__super__.constructor.call(this,this.metadata)}var d;return j(b,a),h(b,"tuple",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype._include=function(a){return"object"!=typeof a?!1:this.areAttributesValid(a)?c.every(this.heading.attributes,function(b){var c;return null!=a[b.name]?(c=a[b.name],b.type.include(c)):!0}):!1},b.prototype._mDress=function(a,b){var e,f,g,h,i;return a instanceof Object?(h={},i=b.success(h),f=function(c){return function(d,e){var f,g,j,k;return f=c.heading.getAttr(e)||null,g=a[e],void 0===g&&null!=f&&f.required?(j=b.failure(e,["Missing attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j})):null!=f||c.heading.allowExtra()?null!=f&&void 0!==g?(k=f.type.mDress(g,b),k.onFailure(function(a){return a.location=e,k}),k.onSuccess(function(a){return h[e]=a,i})):void 0!==g?(h[e]=g,i):i:(j=b.failure(e,["Unrecognized attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j}))}}(this),g=function(c){return function(d){var e;return e=["Tuple",a],b.failure(c,["Invalid ${typeName}",e],d)}}(this),e=d(this.heading),c.extend(e,a),e=Object.keys(e),b.refine(i,e,f,g)):b.failure(this,["Invalid Tuple: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g,h,i,j;return e instanceof b||c.undressError("Tuple cannot undress to `"+e+"` ("+e.constructor+")."),j=c.triSplit(d(this.heading),d(e.heading)),h=j[0],f=j[1],g=j[2],c.find(f,function(a){return a.required})&&c.undressError("Tuple undress does not allow projecting "+f),c.isEmpty(g)||c.undressError("Tuple undress does not support missing "+g),c.every(h,function(a){return a[0].required===a[1].required})||c.undressError("Tuple undress requires optional attributes to agree"),i={},this.heading.each(function(b){var c,d,f,g;return c=b.name,d=b.type,f=a[c],void 0!==f?(g=e.heading.getAttr(c).type,i[b.name]=d.undress(f,g)):void 0}),i},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.toString=function(){return"{ "+this.heading.toString()+" }"},d=function(a){var b;return b={},a.each(function(a){return b[a.name]=a}),b},b.prototype.attributeNames=function(){return c.map(this.heading.attributes,function(a){return a.name})},b.prototype.requiredAttributeNames=function(){return c.map(c.values(c.filter(this.heading.attributes,function(a){return a.required})),function(a){return a.name})},b.prototype.extraAttributes=function(a){return c.difference(c.keys(a),this.attributeNames())},b.prototype.missingAttributes=function(a){return c.difference(this.requiredAttributeNames(),c.keys(a))},b.prototype.areAttributesValid=function(a){return(this.heading.allowExtra()||c.isEmpty(this.extraAttributes(a)))&&c.isEmpty(this.missingAttributes(a))},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25}],35:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../support/ic").ObjectType,e=a("../type"),c=a("../support/utils"),f=function(a){function b(a,d,e){this.type=a,this.name=d,this.metadata=e,this.name||c.argumentError("Name cannot be null on TypeDef"),b.__super__.constructor.call(this,this.metadata),this.generator=this.type.generator}return h(b,a),d(b,["type","name","metadata"]),b.prototype.fetch=function(){return this.type.fetch.apply(this.type,arguments)},b.prototype._include=function(a){return this.type.include(a)},b.prototype._mDress=function(a,b){var c;return c=this.type.mDress(a,b),c.onFailure(function(a){return function(b){return b.typeName="Main"===a.name?"Data":a.name,c}}(this))},b.prototype._undress=function(a,b){return this.type.undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.type.isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.type._isSubTypeOf(a)},b.prototype._equals=function(a){return this.type.equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.type},b.prototype.low=function(){return this.type.low()},b.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},b.prototype.toString=function(){return this.name},b}(e),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],36:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),e=function(a){function b(a,d,e){this.typeName=a,this.metadata=d,this.target=e,this.typeName||c.argumentError("Proxied ref cannot be null on TypeRef"),b.__super__.constructor.call(this,this.metadata)}return h(b,a),f(b,"ref",["typeName","metadata"]),b.prototype.fetch=function(){var a;return a=this.resolved(),a.fetch.apply(a,arguments)},b.prototype._include=function(a){return this.resolved().include(a)},b.prototype._mDress=function(a,b){return this.resolved().mDress(a,b)},b.prototype._undress=function(a,b){return this.resolved().undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.resolved().isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.resolved()._isSubTypeOf(a)},b.prototype._equals=function(a){return this.resolved().equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.resolved().trueOne()},b.prototype.low=function(){return this.resolved().low()},b.prototype.resolve=function(a){return null!=this.target?this.target:this.target=a.resolve(this.typeName).fetchType()},b.prototype.resolveProxies=function(a){return this.resolve(a)},b.prototype.resolved=function(){if(!this.target)throw new Error("Proxy is not resolved");return this.target},b.prototype.toString=function(){return this.typeName},b}(d),b.exports=e}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],37:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),f=function(a){function b(a,e){this.candidates=a,this.metadata=e,c.each(this.candidates,function(a){return a instanceof d?void 0:c.argumentError("Finitio.Type expected, got:",a)}),b.__super__.constructor.call(this,this.metadata)}return h(b,a),e(b,"union",["candidates","metadata"]),b.prototype._mDress=function(a,b){var c,d;return c=function(c){return c.mDress(a,b)},d=function(c){return function(d){var e;return e=["value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.candidates,c,d)},b.prototype._undress=function(a,b){var d;return this===b?a:(d=c.find(this.candidates,function(a){return b.isSuperTypeOf(a)}))?d.undress(a,b):(d=c.find(this.candidates,function(b){return b.include(a)}))?d.undress(a,b):c.undressError("Unable to undress `"+a+"` to `"+b+"`")},b.prototype._include=function(a){var b;return b=c.find(this.candidates,function(b){return b.include(a)}),null!=b},b.prototype._isSuperTypeOf=function(a){return this===a||c.any(this.candidates,function(b){return b.isSuperTypeOf(a)})||a instanceof b&&c.every(a.candidates,function(a){return function(b){return c.any(a.candidates,function(a){return a.isSuperTypeOf(b)})}}(this))||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.candidatesEquals(a,!0)||b.__super__._equals.apply(this,arguments)},b.prototype.candidatesEquals=function(a,b){var d;return d=c.every(this.candidates,function(b){return c.any(a.candidates,function(a){return b.equals(a)})}),d&&(!b||a.candidatesEquals(this,!1))},b.prototype.low=function(){throw"UnionType#low is not defined yet, sorry!"},b.prototype.resolveProxies=function(a){return c.each(this.candidates,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.candidates,function(a){return a.toString()}).join("|")},b}(d),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],38:[function(){},{}]},{},[2]);